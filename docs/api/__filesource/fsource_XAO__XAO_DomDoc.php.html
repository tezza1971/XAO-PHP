<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title>File Source for XAO_DomDoc.php</title>
	<link rel="stylesheet" type="text/css" href="../media/style.css">
	<meta http-equiv='Content-Type' content='text/html; charset=iso-8859-1'/>
</head>
<body>

<table border="0" cellspacing="0" cellpadding="0" height="48" width="100%">
  <tr>
	<td class="header-top-left">
        Documentation automatically generated from the source-code
        using <a href="http://phpdocu.sourceforge.net/" title="Go to the phpDocumentor homepage.">phpDocumentor</a>.
       <div>Official Homepage: <a href="http://xao-php.sourceforge.net">xao-php.sourceforge.net</a></div>
    </td>
    <td class="header-top-right">XAO<div class="header-top-right-subpackage"></div></td>
  </tr>
  <tr><td colspan="2" class="header-line"><img src="../media/empty.png" width="1" height="1" border="0" alt=""  /></td></tr>
  <tr>
    <td colspan="2" class="header-menu">
          <a href="http://xao-php.sourceforge.net">Official homepage</a> |
          <a href="../index.html">API home</a> |
  		  <a href="../classtrees_XAO.html" class="menu">class tree: XAO</a> |
		  <a href="../elementindex_XAO.html" class="menu">index: XAO</a> |
		  <a href="../elementindex.html" class="menu">all elements</a>
    </td>
  </tr>
  <tr><td colspan="2" class="header-line"><img src="../media/empty.png" width="1" height="1" border="0" alt=""  /></td></tr>
</table>

<table width="100%" border="0" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="195" class="menu">
		<div class="package-title">XAO</div>
      <b>Packages:</b><br />
  <div class="package">
              <a href="../li_XAO.html">XAO</a><br />
      	</div>
      <br />
                
                                <br />
                    </td>
    <td>
      <table cellpadding="10" cellspacing="0" width="100%" border="0"><tr><td valign="top">

<h1 align="center">Source for file XAO_DomDoc.php</h1>
<p>Documentation is available at <a href="../XAO/_classes_XAO_DomDoc_php.html">XAO_DomDoc.php</a></p>
<div class="src-code">
<pre><a name="a1"></a><br />1     <strong>&lt;?php</strong><a name="a2"></a><br />2     <font color="#009999">/**</font><a name="a3"></a><br />3     <font color="#009999">* XAO_DomDoc.php</font><a name="a4"></a><br />4     <font color="#009999">*</font><a name="a5"></a><br />5     <font color="#009999">* This script provides the class definition for DomDoc. Since the</font><a name="a6"></a><br />6     <font color="#009999">* DomDoc class provides the basis for XAO, all the requirements checks for XAO</font><a name="a7"></a><br />7     <font color="#009999">* are done first up in this script. In general, however, all the code in XAO is</font><a name="a8"></a><br />8     <font color="#009999">* object oriented. For more information on the DomDoc class itself, see the doc</font><a name="a9"></a><br />9     <font color="#009999">* comment directly preceding the class declaration.</font><a name="a10"></a><br />10    <font color="#009999">*</font><a name="a11"></a><br />11    <font color="#009999">*</font><font color="#009999"> </font><strong><font color = "#0099FF">@author</font></strong><font color="#009999">       Terence Kearns</font><a name="a12"></a><br />12    <font color="#009999">*</font><font color="#009999"> </font><strong><font color = "#0099FF">@version</font></strong><font color="#009999">      1.0 alpha</font><a name="a13"></a><br />13    <font color="#009999">*</font><font color="#009999"> </font><strong><font color = "#0099FF">@copyright</font></strong><font color="#009999">    Terence Kearns 2003</font><a name="a14"></a><br />14    <font color="#009999">*</font><font color="#009999"> </font><strong><font color = "#0099FF">@license</font></strong><font color="#009999">      LGPL</font><a name="a15"></a><br />15    <font color="#009999">*</font><font color="#009999"> </font><strong><font color = "#0099FF">@link</font></strong><font color="#009999">         http://xao-php.sourceforge.net</font><a name="a16"></a><br />16    <font color="#009999">*</font><font color="#009999"> </font><strong><font color = "#0099FF">@package</font></strong><font color="#009999">      XAO</font><a name="a17"></a><br />17    <font color="#009999">*/</font><a name="a18"></a><br />18    <a name="a19"></a><br />19    <a name="a20"></a><br />20    <font color="#009999">/**</font><a name="a21"></a><br />21    <font color="#009999">* Import the root (base) XAO class.</font><a name="a22"></a><br />22    <font color="#009999">* </font><a name="a23"></a><br />23    <font color="#009999">* All classes in the XAO library should inherit this class. See documentation on</font><a name="a24"></a><br />24    <font color="#009999">* the class itself for more details.</font><a name="a25"></a><br />25    <font color="#009999">*</font><a name="a26"></a><br />26    <font color="#009999">*</font><font color="#009999"> </font><strong><font color="#009999">@import</font></strong><font color="#009999"> XaoRoot</font><a name="a27"></a><br />27    <font color="#009999">*/</font><a name="a28"></a><br />28    <font color="#800000">include_once</font> <font color="#ff702b">&quot;XAO_XaoRoot.php&quot;</font>;<a name="a29"></a><br />29    <a name="a30"></a><br />30    <font color="#009999">/**</font><a name="a31"></a><br />31    <font color="#009999">* Import the Exceptions utility class.</font><a name="a32"></a><br />32    <font color="#009999">* </font><a name="a33"></a><br />33    <font color="#009999">* This is only instantiated if $this-&gt;Throw() is called. This object</font><a name="a34"></a><br />34    <font color="#009999">* encapsulates error data management. It keeps all the error data on the</font><a name="a35"></a><br />35    <font color="#009999">* referenced DOM doc rather than an internal stack.</font><a name="a36"></a><br />36    <font color="#009999">*</font><a name="a37"></a><br />37    <font color="#009999">*</font><font color="#009999"> </font><strong><font color="#009999">@import</font></strong><font color="#009999"> Exceptions</font><a name="a38"></a><br />38    <font color="#009999">*/</font><a name="a39"></a><br />39    <font color="#800000">include_once</font> <font color="#ff702b">&quot;XAO_Exceptions.php&quot;</font>;<a name="a40"></a><br />40    <a name="a41"></a><br />41    <font color="#009999">/**</font><a name="a42"></a><br />42    <font color="#009999">* Import Dom Factory for parsing/obtaining DOM objects.</font><a name="a43"></a><br />43    <font color="#009999">* </font><a name="a44"></a><br />44    <font color="#009999">* This is a general purpose class providing comprehensive parsing options when</font><a name="a45"></a><br />45    <font color="#009999">* obtaining DOM object. Using this class provides centralised DOM object</font><a name="a46"></a><br />46    <font color="#009999">* management across the whole library.</font><a name="a47"></a><br />47    <font color="#009999">*</font><a name="a48"></a><br />48    <font color="#009999">*</font><font color="#009999"> </font><strong><font color="#009999">@import</font></strong><font color="#009999"> Exceptions</font><a name="a49"></a><br />49    <font color="#009999">*/</font><a name="a50"></a><br />50    <font color="#800000">include_once</font> <font color="#ff702b">&quot;XAO_DomFactory.php&quot;</font>;<a name="a51"></a><br />51    <a name="a52"></a><br />52    <font color="#009999">/**</font><a name="a53"></a><br />53    <font color="#009999">* New dom document from from scratch</font><a name="a54"></a><br />54    <font color="#009999">* </font><a name="a55"></a><br />55    <font color="#009999">* This constant represents a mode of the DomDoc which causes it to create a</font><a name="a56"></a><br />56    <font color="#009999">* new document on instatiation - using the starter as the name of the root</font><a name="a57"></a><br />57    <font color="#009999">* element for the new document.</font><a name="a58"></a><br />58    <font color="#009999">*/</font><a name="a59"></a><br />59    <a href="http://www.php.net/define">define</a><strong>(</strong><font color="#ff702b">&quot;XAO_DOC_NEW&quot;</font><strong>,</strong>10<strong>)</strong>;<a name="a60"></a><br />60    <a name="a61"></a><br />61    <font color="#009999">/**</font><a name="a62"></a><br />62    <font color="#009999">* Dom document from local file for reading only.</font><a name="a63"></a><br />63    <font color="#009999">* </font><a name="a64"></a><br />64    <font color="#009999">* This constant represents a mode of the DomDoc which causes it to use an</font><a name="a65"></a><br />65    <font color="#009999">* existing XML file as the basis of the DomDoc document on instatiation -</font><a name="a66"></a><br />66    <font color="#009999">* using the starter to determin the location of the local file. It treats</font><a name="a67"></a><br />67    <font color="#009999">* the file as read-only so none of the write methods will work. It uses a</font><a name="a68"></a><br />68    <font color="#009999">* non-exclusive read lock when opening the file.</font><a name="a69"></a><br />69    <font color="#009999">*/</font><a name="a70"></a><br />70    <a href="http://www.php.net/define">define</a><strong>(</strong><font color="#ff702b">&quot;XAO_DOC_READFILE&quot;</font><strong>,</strong>20<strong>)</strong>;<a name="a71"></a><br />71    <a name="a72"></a><br />72    <font color="#009999">/**</font><a name="a73"></a><br />73    <font color="#009999">* Dom document from existing PHP DOM object instance.</font><a name="a74"></a><br />74    <font color="#009999">* </font><a name="a75"></a><br />75    <font color="#009999">* This constant represents a mode of the DomDoc which causes it to use an</font><a name="a76"></a><br />76    <font color="#009999">* existing PHP DOM XML object instance for this DomDoc instance. This has the</font><a name="a77"></a><br />77    <font color="#009999">* effect of adding functionality from this class to an existing DOM object.</font><a name="a78"></a><br />78    <font color="#009999">*/</font><a name="a79"></a><br />79    <a href="http://www.php.net/define">define</a><strong>(</strong><font color="#ff702b">&quot;XAO_DOC_REFERENCE&quot;</font><strong>,</strong>50<strong>)</strong>;<a name="a80"></a><br />80    <a name="a81"></a><br />81    <font color="#009999">/**</font><a name="a82"></a><br />82    <font color="#009999">* Dom document from existing XML data in a variable.</font><a name="a83"></a><br />83    <font color="#009999">* </font><a name="a84"></a><br />84    <font color="#009999">* This constant represents a mode of the DomDoc which causes it to use</font><a name="a85"></a><br />85    <font color="#009999">* existing XML data as the basis for a new DomDoc object. Obviously the</font><a name="a86"></a><br />86    <font color="#009999">* XML data needs to be well-formed.</font><a name="a87"></a><br />87    <font color="#009999">*/</font><a name="a88"></a><br />88    <a href="http://www.php.net/define">define</a><strong>(</strong><font color="#ff702b">&quot;XAO_DOC_DATA&quot;</font><strong>,</strong>60<strong>)</strong>;<a name="a89"></a><br />89    <a name="a90"></a><br />90    <a name="a91"></a><br />91    <a name="a92"></a><br />92    <font color="#009999">/**</font><a name="a93"></a><br />93    <font color="#009999">* General purpose DOM class</font><a name="a94"></a><br />94    <font color="#009999">*</font><a name="a95"></a><br />95    <font color="#009999">* This class provides three forms of functionality. 1) shortcut functions to</font><a name="a96"></a><br />96    <font color="#009999">* operations made tedious by the DOM API. 2) additional features not supported</font><a name="a97"></a><br />97    <font color="#009999">* by the DOM API. 3) a thread-safe way of interacting with files associated</font><a name="a98"></a><br />98    <font color="#009999">* with the class' DOM document.</font><a name="a99"></a><br />99    <font color="#009999">*</font><a name="a100"></a><br />100   <font color="#009999">*</font><font color="#009999"> </font><strong><font color = "#0099FF">@package</font></strong><font color="#009999">      XAO</font><a name="a101"></a><br />101   <font color="#009999">*/</font><a name="a102"></a><br />102   <font color="blue">class</font> <a href="../XAO/DomDoc.html">DomDoc</a> <font color="blue">extends</font> <a href="../XAO/XaoRoot.html">XaoRoot</a> <strong>{</strong><a name="a103"></a><br />103   <a name="a104"></a><br />104       <font color="#009999">/**</font><a name="a105"></a><br />105   <font color="#009999">    * Singleton instance of Exceptions object.</font><a name="a106"></a><br />106   <font color="#009999">    *</font><a name="a107"></a><br />107   <font color="#009999">    * This is only instantiated if $this-&gt;Throw() is called. This object</font><a name="a108"></a><br />108   <font color="#009999">    * encapsulates error data management. It keeps all the error data on the</font><a name="a109"></a><br />109   <font color="#009999">    * referenced DOM doc rather than a stack local to this class.</font><a name="a110"></a><br />110   <font color="#009999">    * </font><a name="a111"></a><br />111   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@access</font></strong><font color="#009999">   public</font><a name="a112"></a><br />112   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999">     </font><em>object </em><font color="#009999"></font><a name="a113"></a><br />113   <font color="#009999">    */</font><a name="a114"></a><br />114       <font color="blue">var</font> <a href="../XAO/DomDoc.html#var$objErr">$objErr</a>;<a name="a115"></a><br />115   <a name="a116"></a><br />116       <font color="#009999">/**</font><a name="a117"></a><br />117   <font color="#009999">    * Element containing the last(current) error message.</font><a name="a118"></a><br />118   <font color="#009999">    *</font><a name="a119"></a><br />119   <font color="#009999">    * This is populated by $this-&gt;Throw() and is always appended to the root</font><a name="a120"></a><br />120   <font color="#009999">    * node. in order for consumed DOM documents to have their errors displayed</font><a name="a121"></a><br />121   <font color="#009999">    * the consume function of the context DomDoc needs to search for these and</font><a name="a122"></a><br />122   <font color="#009999">    * copy them to the root node of itself.</font><a name="a123"></a><br />123   <font color="#009999">    * </font><a name="a124"></a><br />124   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@access</font></strong><font color="#009999">   public</font><a name="a125"></a><br />125   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999">     </font><em>node </em><a name="a126"></a><br />126   <font color="#009999">    */</font><a name="a127"></a><br />127       <font color="blue">var</font> <a href="../XAO/DomDoc.html#var$ndErr">$ndErr</a>;<a name="a128"></a><br />128   <a name="a129"></a><br />129       <font color="#009999">/**</font><a name="a130"></a><br />130   <font color="#009999">    * An instance of the main DOM XML object.</font><a name="a131"></a><br />131   <font color="#009999">    * </font><a name="a132"></a><br />132   <font color="#009999">    * The native PHP DOM XML object is kept here. Any PHP DOM methods may</font><a name="a133"></a><br />133   <font color="#009999">    * be accessed directly from this object. For instance,</font><a name="a134"></a><br />134   <font color="#009999">    * $objMy-&gt;objDoc-&gt;get_element_by_id(); The user can also pass this member</font><a name="a135"></a><br />135   <font color="#009999">    * to functions requiring a native PHP DOM XML object. It is important to</font><a name="a136"></a><br />136   <font color="#009999">    * note that the XAO API in no way limits the user's access to PHP's built-in</font><a name="a137"></a><br />137   <font color="#009999">    * functions.</font><a name="a138"></a><br />138   <font color="#009999">    *</font><a name="a139"></a><br />139   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@access</font></strong><font color="#009999">   public</font><a name="a140"></a><br />140   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999">     </font><em>object </em><font color="#009999"></font><a name="a141"></a><br />141   <font color="#009999">    */</font><a name="a142"></a><br />142       <font color="blue">var</font> <a href="../XAO/DomDoc.html#var$objDoc">$objDoc</a>;<a name="a143"></a><br />143   <a name="a144"></a><br />144       <font color="#009999">/**</font><a name="a145"></a><br />145   <font color="#009999">    * Document root node</font><a name="a146"></a><br />146   <font color="#009999">    * </font><a name="a147"></a><br />147   <font color="#009999">    * This object variable conains a reference to the root element node</font><a name="a148"></a><br />148   <font color="#009999">    * of this DomDoc. It's a handy shortcut to $this-&gt;objDoc-&gt;document_root()</font><a name="a149"></a><br />149   <font color="#009999">    * because it is used a lot.</font><a name="a150"></a><br />150   <font color="#009999">    *</font><a name="a151"></a><br />151   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@access</font></strong><font color="#009999">   public</font><a name="a152"></a><br />152   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999">     </font><em>node </em><a name="a153"></a><br />153   <font color="#009999">    */</font><a name="a154"></a><br />154       <font color="blue">var</font> <a href="../XAO/DomDoc.html#var$ndRoot">$ndRoot</a>;<a name="a155"></a><br />155           <a name="a156"></a><br />156       <font color="#009999">/**</font><a name="a157"></a><br />157   <font color="#009999">    * How has the document been instantiated.</font><a name="a158"></a><br />158   <font color="#009999">    * </font><a name="a159"></a><br />159   <font color="#009999">    * This attribute remembers the value of the mode constant that was</font><a name="a160"></a><br />160   <font color="#009999">    * used to instantiate this DomDoc object.</font><a name="a161"></a><br />161   <font color="#009999">    *</font><a name="a162"></a><br />162   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@access</font></strong><font color="#009999">   private</font><a name="a163"></a><br />163   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999">     </font><em>integer </em><font color="#009999"></font><font color="#009999">from constant</font><a name="a164"></a><br />164   <font color="#009999">    */</font><a name="a165"></a><br />165       <font color="blue">var</font> <strong><font color="#008000">$_intMode</font></strong>;<a name="a166"></a><br />166       <a name="a167"></a><br />167       <font color="#009999">/**</font><a name="a168"></a><br />168   <font color="#009999">    * Queue of element objects to be procssed</font><a name="a169"></a><br />169   <font color="#009999">    * </font><a name="a170"></a><br />170   <font color="#009999">    * Users can use the SetCustomTagName() function to nominate elements by</font><a name="a171"></a><br />171   <font color="#009999">    * name to be kept in this list. The method also requires the name of a</font><a name="a172"></a><br />172   <font color="#009999">    * valid function to do the processing.</font><a name="a173"></a><br />173   <font color="#009999">    *</font><a name="a174"></a><br />174   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@access</font></strong><font color="#009999">   private</font><a name="a175"></a><br />175   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999">     </font><em>integer </em><font color="#009999"></font><font color="#009999">from constant</font><a name="a176"></a><br />176   <font color="#009999">    */</font><a name="a177"></a><br />177       <font color="blue">var</font> <strong><font color="#008000">$_arrCustomTagNames</font></strong> = array<strong>(</strong><strong>)</strong>;<a name="a178"></a><br />178       <a name="a179"></a><br />179       <font color="#009999">/**</font><a name="a180"></a><br />180   <font color="#009999">    * Queue of query result node objects to be procssed</font><a name="a181"></a><br />181   <font color="#009999">    * </font><a name="a182"></a><br />182   <font color="#009999">    * Users can use the SetCustomTagQuery() function to find nodes to be kept</font><a name="a183"></a><br />183   <font color="#009999">    * in this list. The method also requires the name of a valid function to do</font><a name="a184"></a><br />184   <font color="#009999">    * the processing.</font><a name="a185"></a><br />185   <font color="#009999">    *</font><a name="a186"></a><br />186   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@access</font></strong><font color="#009999">   private</font><a name="a187"></a><br />187   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999">     </font><em>integer </em><font color="#009999"></font><font color="#009999">from constant</font><a name="a188"></a><br />188   <font color="#009999">    */</font><a name="a189"></a><br />189       <font color="blue">var</font> <strong><font color="#008000">$_arrCustomTagQueries</font></strong> = array<strong>(</strong><strong>)</strong>;<a name="a190"></a><br />190   <a name="a191"></a><br />191       <font color="#009999">/**</font><a name="a192"></a><br />192   <font color="#009999">    * Constructor method</font><a name="a193"></a><br />193   <font color="#009999">    *</font><a name="a194"></a><br />194   <font color="#009999">    * Create the objDoc instance property and associated ndRoot property based</font><a name="a195"></a><br />195   <font color="#009999">    * on the user-selected mode of document creation.</font><a name="a196"></a><br />196   <font color="#009999">    *</font><a name="a197"></a><br />197   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999">   </font><em>mixed </em><font color="#009999">  </font><font color="#009999">information required to create a DOM document</font><a name="a198"></a><br />198   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999">   </font><em>int </em><font color="#009999">    </font><font color="#009999">constant specifying how the document is to be created</font><a name="a199"></a><br />199   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@return </font></strong><font color="#009999">  </font><em>void </em><a name="a200"></a><br />200   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@access</font></strong><font color="#009999">   public</font><a name="a201"></a><br />201   <font color="#009999">    */</font><a name="a202"></a><br />202       <font color="blue">function</font> <a href="../XAO/DomDoc.html#methodDomDoc">DomDoc</a><strong>(</strong><strong>&amp;</strong><strong><font color="#008000">$mxdData</font></strong><strong>,</strong><strong><font color="#008000">$intUse</font></strong> = XAO_DOC_NEW<strong>)</strong> <strong>{</strong><a name="a203"></a><br />203   <a name="a204"></a><br />204           <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><strong><font color="#008000">_intMode</font></strong> = <strong><font color="#008000">$intUse</font></strong>;<a name="a205"></a><br />205                                       <font color="#a0a0a4">// for more info on each case block, see</font><a name="a206"></a><br />206                                       <font color="#a0a0a4">// comments in the constant definitions</font><a name="a207"></a><br />207                                       <font color="#a0a0a4">// at the top of this file.</font><a name="a208"></a><br />208           <font color="blue">if</font><strong>(</strong><strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><strong><font color="#008000">_intMode</font></strong> == <a href="../XAO/_classes_XAO_DomDoc_php.html#defineXAO_DOC_NEW">XAO_DOC_NEW</a><strong>)</strong> <strong>{</strong><a name="a209"></a><br />209               <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#var$objDoc">objDoc</a> = <a href="http://www.php.net/domxml_new_doc">domxml_new_doc</a><strong>(</strong><font color="#ff702b">&quot;1.0&quot;</font><strong>)</strong>;<a name="a210"></a><br />210               <strong><font color="#008000">$elRoot</font></strong> = <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#var$objDoc">objDoc</a><strong>-&gt;</strong>create_element<strong>(</strong><strong><font color="#008000">$mxdData</font></strong><strong>)</strong>;<a name="a211"></a><br />211               <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#var$ndRoot">ndRoot</a> = <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#var$objDoc">objDoc</a><strong>-&gt;</strong>append_child<strong>(</strong><strong><font color="#008000">$elRoot</font></strong><strong>)</strong>;<a name="a212"></a><br />212           <strong>}</strong> <a name="a213"></a><br />213           elseif<strong>(</strong><a name="a214"></a><br />214                  <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><strong><font color="#008000">_intMode</font></strong> == <a href="../XAO/_classes_XAO_DomDoc_php.html#defineXAO_DOC_READFILE">XAO_DOC_READFILE</a> <a name="a215"></a><br />215               || <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><strong><font color="#008000">_intMode</font></strong> == <a href="../XAO/_classes_XAO_DomDoc_php.html#defineXAO_DOC_DATA">XAO_DOC_DATA</a><a name="a216"></a><br />216           <strong>)</strong> <strong>{</strong><a name="a217"></a><br />217               <strong><font color="#008000">$objDomFactory</font></strong> =<strong>&amp;</strong> new <a href="../XAO/DomFactory.html">DomFactory</a><strong>(</strong><strong><font color="#008000">$mxdData</font></strong><strong>)</strong>;<a name="a218"></a><br />218               <font color="blue">if</font><strong>(</strong><a href="http://www.php.net/strlen">strlen</a><strong>(</strong><strong><font color="#008000">$objDomFactory</font></strong><strong>-&gt;</strong>strErrorMsgFull<strong>)</strong><strong>)</strong> <strong>{</strong><a name="a219"></a><br />219                   <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong>_AbortDocument<strong>(</strong><strong><font color="#008000">$objDomFactory</font></strong><strong>-&gt;</strong>strErrorMsgFull<strong>)</strong>;<a name="a220"></a><br />220                   die<strong>(</strong><strong><font color="#008000">$objDomFactory</font></strong><strong>-&gt;</strong>strError<strong>)</strong>;<a name="a221"></a><br />221               <strong>}</strong><a name="a222"></a><br />222               else <strong>{</strong><a name="a223"></a><br />223                   <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#var$objDoc">objDoc</a> = <strong><font color="#008000">$objDomFactory</font></strong><strong>-&gt;</strong>objGetObjDoc<strong>(</strong><strong>)</strong>;<a name="a224"></a><br />224               <strong>}</strong><a name="a225"></a><br />225               <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#var$ndRoot">ndRoot</a> = <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#var$objDoc">objDoc</a><strong>-&gt;</strong>document_element<strong>(</strong><strong>)</strong>;<a name="a226"></a><br />226           <strong>}</strong><a name="a227"></a><br />227           elseif<strong>(</strong><strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><strong><font color="#008000">_intMode</font></strong> == <a href="../XAO/_classes_XAO_DomDoc_php.html#defineXAO_DOC_REFERENCE">XAO_DOC_REFERENCE</a><strong>)</strong> <strong>{</strong><a name="a228"></a><br />228               <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#var$objDoc">objDoc</a> =<strong>&amp;</strong> <strong><font color="#008000">$mxdData</font></strong>;<a name="a229"></a><br />229               <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#var$ndRoot">ndRoot</a> = <strong>@</strong><strong><font color="#008000">$mxdData</font></strong><strong>-&gt;</strong>document_element<strong>(</strong><strong>)</strong><a name="a230"></a><br />230                   OR <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong>_AbortDocument<strong>(</strong><a name="a231"></a><br />231                       <font color="#ff702b">&quot;The reference document object is not a valid native </font><a name="a232"></a><br />232   <font color="#ff702b">                    PHP DOM XML document.&quot;</font><a name="a233"></a><br />233                   <strong>)</strong>;<a name="a234"></a><br />234           <strong>}</strong><a name="a235"></a><br />235           else <strong>{</strong><a name="a236"></a><br />236               <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong>_AbortDocument<strong>(</strong><a name="a237"></a><br />237                   <font color="#ff702b">&quot;The second argument to DomDoc constructor is invalid.&quot;</font><a name="a238"></a><br />238               <strong>)</strong>;<a name="a239"></a><br />239           <strong>}</strong><a name="a240"></a><br />240       <strong>}</strong><a name="a241"></a><br />241           <a name="a242"></a><br />242       <font color="#009999">/**</font><a name="a243"></a><br />243   <font color="#009999">    * Abort document initialisation and instantiate an error document instead.</font><a name="a244"></a><br />244   <font color="#009999">    * </font><a name="a245"></a><br />245   <font color="#009999">    * If something goes wrong in the initialisation process, the creation of a</font><a name="a246"></a><br />246   <font color="#009999">    * document is aborted and a token error document is initialised instead.</font><a name="a247"></a><br />247   <font color="#009999">    * Ordinarily, the $this-&gt;Throw() method is used to raise errors, however</font><a name="a248"></a><br />248   <font color="#009999">    * if the initialisation process is not complete, then $this-&gt;Throw() will</font><a name="a249"></a><br />249   <font color="#009999">    * not work. This function ensures that a document is always created and</font><a name="a250"></a><br />250   <font color="#009999">    * then it calls the throw function.</font><a name="a251"></a><br />251   <font color="#009999">    * </font><a name="a252"></a><br />252   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999">  </font><em>string </em><font color="#009999">  </font><font color="#009999">Error message to be contained in the error root element</font><a name="a253"></a><br />253   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@return </font></strong><font color="#009999"> </font><em>void </em><a name="a254"></a><br />254   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@access</font></strong><font color="#009999">  private</font><a name="a255"></a><br />255   <font color="#009999">    */</font><a name="a256"></a><br />256       <font color="blue">function</font> _AbortDocument<strong>(</strong><strong><font color="#008000">$strErrMsg</font></strong><strong>)</strong> <strong>{</strong><a name="a257"></a><br />257                                           <font color="#a0a0a4">// produce a basic documemnt so that we</font><a name="a258"></a><br />258                                           <font color="#a0a0a4">// have enough to throw an error.</font><a name="a259"></a><br />259           <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#var$objDoc">objDoc</a> = <a href="http://www.php.net/domxml_new_doc">domxml_new_doc</a><strong>(</strong><font color="#ff702b">&quot;1,0&quot;</font><strong>)</strong>;<a name="a260"></a><br />260           <strong><font color="#008000">$ndRoot</font></strong> = <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#var$objDoc">objDoc</a><strong>-&gt;</strong>create_element<strong>(</strong><font color="#ff702b">&quot;abortedDoc&quot;</font><strong>)</strong>;<a name="a261"></a><br />261           <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#var$ndRoot">ndRoot</a> = <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#var$objDoc">objDoc</a><strong>-&gt;</strong>append_child<strong>(</strong><strong><font color="#008000">$ndRoot</font></strong><strong>)</strong>;<a name="a262"></a><br />262           <a name="a263"></a><br />263           <strong><font color="#008000">$arrErrAttribs</font></strong> = array<strong>(</strong><font color="#ff702b">&quot;code&quot;</font> =&gt; <font color="#ff702b">&quot;DomDocInit&quot;</font><strong>)</strong>;<a name="a264"></a><br />264           <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#methodThrow">Throw</a><strong>(</strong><a name="a265"></a><br />265               <strong><font color="#008000">$strErrMsg</font></strong><strong>,</strong><a name="a266"></a><br />266               <strong><font color="#008000">$arrErrAttribs</font></strong><strong>,</strong><a name="a267"></a><br />267               <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/XaoRoot.html#methodarrSetErrFnc">arrSetErrFnc</a><strong>(</strong>__FUNCTION__<strong>,</strong>__LINE__<strong>)</strong><a name="a268"></a><br />268           <strong>)</strong>;<a name="a269"></a><br />269       <strong>}</strong><a name="a270"></a><br />270       <a name="a271"></a><br />271       <font color="#009999">/**</font><a name="a272"></a><br />272   <font color="#009999">    * Base error logger</font><a name="a273"></a><br />273   <font color="#009999">    * </font><a name="a274"></a><br />274   <font color="#009999">    * All DomDoc based objects should use this method to raise errors. The</font><a name="a275"></a><br />275   <font color="#009999">    * method will not stop execution. It will create elements on the DomDoc</font><a name="a276"></a><br />276   <font color="#009999">    * tree containing all the error data available. It is up to the stylsheet</font><a name="a277"></a><br />277   <font color="#009999">    * to extract and render error information through an appropriate template.</font><a name="a278"></a><br />278   <font color="#009999">    * Users should note the ability to define a custom call-back function which</font><a name="a279"></a><br />279   <font color="#009999">    * may be created as a method in the child object. To do this, populate</font><a name="a280"></a><br />280   <font color="#009999">    * $this-&gt;strErrCallbackFunc with the name of your custom error method.</font><a name="a281"></a><br />281   <font color="#009999">    * To find out more about how the exception elements are populated, check</font><a name="a282"></a><br />282   <font color="#009999">    * out the documentation in the Exceptions class.</font><a name="a283"></a><br />283   <font color="#009999">    * </font><a name="a284"></a><br />284   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999">  </font><em>string </em><font color="#009999"> </font><font color="#009999">Main error message for display</font><a name="a285"></a><br />285   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999">  </font><em>array </em><font color="#009999">  </font><font color="#009999">A hash of attributes/values to include in error element</font><a name="a286"></a><br />286   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@return </font></strong><font color="#009999"> </font><em>void </em><a name="a287"></a><br />287   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@access</font></strong><font color="#009999">  public</font><a name="a288"></a><br />288   <font color="#009999">    */</font><a name="a289"></a><br />289       <font color="blue">function</font> <a href="../XAO/DomDoc.html#methodThrow">Throw</a><strong>(</strong><strong><font color="#008000">$strErrMsg</font></strong><strong>,</strong><strong><font color="#008000">$arrAttribs</font></strong> = null<strong>)</strong> <strong>{</strong><a name="a290"></a><br />290           <font color="blue">if</font><strong>(</strong><a href="http://www.php.net/is_null">is_null</a><strong>(</strong><strong><font color="#008000">$arrAttribs</font></strong><strong>)</strong><strong>)</strong> <strong><font color="#008000">$arrAttribs</font></strong> = array<strong>(</strong><strong>)</strong>;<a name="a291"></a><br />291           parent<strong>::</strong><a href="../XAO/XaoRoot.html#methodThrow">Throw</a><strong>(</strong><strong><font color="#008000">$strErrMsg</font></strong><strong>,</strong><strong><font color="#008000">$arrAttribs</font></strong><strong>)</strong>;<a name="a292"></a><br />292                                           <font color="#a0a0a4">// obtain singleton error object if it</font><a name="a293"></a><br />293                                           <font color="#a0a0a4">// does not already exist.</font><a name="a294"></a><br />294           <font color="blue">if</font><strong>(</strong><strong>!</strong><a href="http://www.php.net/is_object">is_object</a><strong>(</strong><strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#var$objErr">objErr</a><strong>)</strong><strong>)</strong><strong>{</strong><a name="a295"></a><br />295                                           <font color="#a0a0a4">// set up the error node to pass to the</font><a name="a296"></a><br />296                                           <font color="#a0a0a4">// Exceptions constructor. Ensure that</font><a name="a297"></a><br />297                                           <font color="#a0a0a4">// all the contents have a default</font><a name="a298"></a><br />298                                           <font color="#a0a0a4">// namespace in XAO</font><a name="a299"></a><br />299               <strong><font color="#008000">$ndExceptions</font></strong> = <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#methodndAppendToRoot">ndAppendToRoot</a><strong>(</strong><font color="#ff702b">&quot;exceptions&quot;</font><strong>)</strong>;<a name="a300"></a><br />300               <strong><font color="#008000">$ndExceptions</font></strong><strong>-&gt;</strong>set_attribute<strong>(</strong><font color="#ff702b">&quot;xmlns&quot;</font><strong>,</strong><strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/XaoRoot.html#var$idXaoNamespace">idXaoNamespace</a><strong>)</strong>;<a name="a301"></a><br />301               <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#var$objErr">objErr</a> = <a name="a302"></a><br />302                   new <a href="../XAO/Exceptions.html">Exceptions</a><strong>(</strong><strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#var$objDoc">objDoc</a><strong>,</strong> <strong><font color="#008000">$ndExceptions</font></strong><strong>,</strong> <font color="#ff702b">&quot;exception&quot;</font><strong>)</strong>;<a name="a303"></a><br />303           <strong>}</strong><a name="a304"></a><br />304                                           <font color="#a0a0a4">// the Exceptions class is not much use</font><a name="a305"></a><br />305                                           <font color="#a0a0a4">// without populating this.</font><a name="a306"></a><br />306           <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#var$objErr">objErr</a><strong>-&gt;</strong>SetMessage<strong>(</strong><strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/XaoRoot.html#var$strError">strError</a><strong>)</strong>;<a name="a307"></a><br />307                                           <font color="#a0a0a4">// optional extras go here.</font><a name="a308"></a><br />308           <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#var$objErr">objErr</a><strong>-&gt;</strong>SetMsgAttribs<strong>(</strong><strong><font color="#008000">$arrAttribs</font></strong><strong>)</strong>;<a name="a309"></a><br />309                                           <font color="#a0a0a4">// This is where all the action occurs</font><a name="a310"></a><br />310                                           <font color="#a0a0a4">// in the Exceptions class. See the Doc</font><a name="a311"></a><br />311                                           <font color="#a0a0a4">// comments in that class for details.</font><a name="a312"></a><br />312           <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#var$ndErr">ndErr</a> = <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#var$objErr">objErr</a><strong>-&gt;</strong>ndCreateError<strong>(</strong><strong>)</strong>;<a name="a313"></a><br />313       <strong>}</strong><a name="a314"></a><br />314           <a name="a315"></a><br />315       <font color="#009999">/**</font><a name="a316"></a><br />316   <font color="#009999">    * Serialise and return the entire document object as stand-alone XML.</font><a name="a317"></a><br />317   <font color="#009999">    *</font><a name="a318"></a><br />318   <font color="#009999">    * This is used when the entire XML document is required in ASCII format.</font><a name="a319"></a><br />319   <font color="#009999">    * </font><a name="a320"></a><br />320   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@return </font></strong><font color="#009999"> </font><em>xml </em><font color="#009999">    </font><font color="#009999">document</font><a name="a321"></a><br />321   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@access</font></strong><font color="#009999">  public</font><a name="a322"></a><br />322   <font color="#009999">    */</font><a name="a323"></a><br />323       <font color="blue">function</font> <a href="../XAO/DomDoc.html#methodxmlGetDoc">xmlGetDoc</a><strong>(</strong><strong>)</strong> <strong>{</strong><a name="a324"></a><br />324           <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong>_TestForConstuctor<strong>(</strong><strong>)</strong>;<a name="a325"></a><br />325           <font color="blue">return</font> <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#var$objDoc">objDoc</a><strong>-&gt;</strong>dump_mem<strong>(</strong>true<strong>)</strong>;<a name="a326"></a><br />326       <strong>}</strong><a name="a327"></a><br />327   <a name="a328"></a><br />328       <font color="#009999">/**</font><a name="a329"></a><br />329   <font color="#009999">    * Serialise and return the entire document as an XML fragment.</font><a name="a330"></a><br />330   <font color="#009999">    * </font><a name="a331"></a><br />331   <font color="#009999">    * This is used when an ASCII version of the XML document is required</font><a name="a332"></a><br />332   <font color="#009999">    * _without_ any XML declaration or processing instructions. Everything</font><a name="a333"></a><br />333   <font color="#009999">    * below and including the root element is serialised.</font><a name="a334"></a><br />334   <font color="#009999">    *</font><a name="a335"></a><br />335   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@return </font></strong><font color="#009999"> </font><em>xml </em><font color="#009999">    </font><font color="#009999">fragment</font><a name="a336"></a><br />336   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@access</font></strong><font color="#009999">  public</font><a name="a337"></a><br />337   <font color="#009999">    */</font><a name="a338"></a><br />338       <font color="blue">function</font> <a href="../XAO/DomDoc.html#methodxmlGetFrag">xmlGetFrag</a><strong>(</strong><strong>)</strong> <strong>{</strong><a name="a339"></a><br />339           <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong>_TestForConstuctor<strong>(</strong><strong>)</strong>;<a name="a340"></a><br />340           <font color="blue">return</font> <font color="#ff702b">&quot;\n\n&quot;</font>.<strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#var$objDoc">objDoc</a><strong>-&gt;</strong>dump_node<strong>(</strong><strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#var$ndRoot">ndRoot</a><strong>,</strong>true<strong>)</strong>.<font color="#ff702b">&quot;\n\n&quot;</font>;<a name="a341"></a><br />341       <strong>}</strong><a name="a342"></a><br />342           <a name="a343"></a><br />343       <font color="#009999">/**</font><a name="a344"></a><br />344   <font color="#009999">    * mass storage serialisation</font><a name="a345"></a><br />345   <font color="#009999">    *</font><a name="a346"></a><br />346   <font color="#009999">    * This function will dump the ASCII version of this XML document [in it's</font><a name="a347"></a><br />347   <font color="#009999">    * current state] to a specified file.</font><a name="a348"></a><br />348   <font color="#009999">    *</font><a name="a349"></a><br />349   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999">   </font><em>uri </em><font color="#009999">    </font><font color="#009999">path to destination file</font><a name="a350"></a><br />350   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@return </font></strong><font color="#009999">  </font><em>void </em><a name="a351"></a><br />351   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@access</font></strong><font color="#009999">   public</font><a name="a352"></a><br />352   <font color="#009999">    */</font><a name="a353"></a><br />353       <font color="blue">function</font> <a href="../XAO/DomDoc.html#methodCommitToFile">CommitToFile</a><strong>(</strong><strong><font color="#008000">$uriDestination</font></strong><strong>)</strong> <strong>{</strong><a name="a354"></a><br />354           <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong>_TestForConstuctor<strong>(</strong><strong>)</strong>;<a name="a355"></a><br />355           <font color="blue">if</font><strong>(</strong><strong>!</strong><a href="http://www.php.net/file_exists">file_exists</a><strong>(</strong><strong><font color="#008000">$uriDestination</font></strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a356"></a><br />356           <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#methodThrow">Throw</a><strong>(</strong><a name="a357"></a><br />357                   <font color="#ff702b">&quot;CommitToFile: &quot;</font>.<strong><font color="#008000">$uriDestination</font></strong>.<font color="#ff702b">&quot; was not found.&quot;</font><strong>,</strong><a name="a358"></a><br />358                   <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/XaoRoot.html#methodarrSetErrFnc">arrSetErrFnc</a><strong>(</strong>__FUNCTION__<strong>,</strong>__LINE__<strong>)</strong><a name="a359"></a><br />359               <strong>)</strong>;<a name="a360"></a><br />360           <font color="blue">return</font>;<a name="a361"></a><br />361           <strong>}</strong><a name="a362"></a><br />362           <strong><font color="#008000">$fp</font></strong> = <strong>@</strong><a href="http://www.php.net/fopen">fopen</a><strong>(</strong><strong><font color="#008000">$uriDestination</font></strong><strong>,</strong><font color="#ff702b">&quot;w+&quot;</font><strong>)</strong><a name="a363"></a><br />363               or <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#methodThrow">Throw</a><strong>(</strong><a name="a364"></a><br />364                   <font color="#ff702b">&quot;CommitToFile: could not open &quot;</font>.<strong><font color="#008000">$uriDestination</font></strong>.<font color="#ff702b">&quot; for writing&quot;</font><strong>,</strong><a name="a365"></a><br />365                   <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/XaoRoot.html#methodarrSetErrFnc">arrSetErrFnc</a><strong>(</strong>__FUNCTION__<strong>,</strong>__LINE__<strong>)</strong><a name="a366"></a><br />366               <strong>)</strong>;<a name="a367"></a><br />367           <strong>@</strong><a href="http://www.php.net/flock">flock</a><strong>(</strong><strong><font color="#008000">$fp</font></strong><strong>,</strong>LOCK_EX<strong>)</strong><a name="a368"></a><br />368               or <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#methodThrow">Throw</a><strong>(</strong><a name="a369"></a><br />369                   <font color="#ff702b">&quot;CommitToFile: Could not get an exclusive lock on &quot;</font><a name="a370"></a><br />370                   .<strong><font color="#008000">$uriDestination</font></strong>.<font color="#ff702b">&quot; for writing&quot;</font><strong>,</strong><a name="a371"></a><br />371                   <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/XaoRoot.html#methodarrSetErrFnc">arrSetErrFnc</a><strong>(</strong>__FUNCTION__<strong>,</strong>__LINE__<strong>)</strong><a name="a372"></a><br />372               <strong>)</strong>;<a name="a373"></a><br />373           <a href="http://www.php.net/fwrite">fwrite</a><strong>(</strong><strong><font color="#008000">$fp</font></strong><strong>,</strong><strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#methodxmlGetDoc">xmlGetDoc</a><strong>(</strong><strong>)</strong><strong>)</strong><a name="a374"></a><br />374               or <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#methodThrow">Throw</a><strong>(</strong><a name="a375"></a><br />375                   <font color="#ff702b">&quot;CommitToFile: could write to &quot;</font>.<strong><font color="#008000">$uriDestination</font></strong><strong>,</strong><a name="a376"></a><br />376                   <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/XaoRoot.html#methodarrSetErrFnc">arrSetErrFnc</a><strong>(</strong>__FUNCTION__<strong>,</strong>__LINE__<strong>)</strong><a name="a377"></a><br />377               <strong>)</strong>;<a name="a378"></a><br />378           <a href="http://www.php.net/flock">flock</a><strong>(</strong><strong><font color="#008000">$fp</font></strong><strong>,</strong>LOCK_UN<strong>)</strong>;<a name="a379"></a><br />379           <a href="http://www.php.net/fclose">fclose</a><strong>(</strong><strong><font color="#008000">$fp</font></strong><strong>)</strong>;<a name="a380"></a><br />380       <strong>}</strong><a name="a381"></a><br />381       <a name="a382"></a><br />382       <font color="#009999">/**</font><a name="a383"></a><br />383   <font color="#009999">    * fetch a single element node by name</font><a name="a384"></a><br />384   <font color="#009999">    *</font><a name="a385"></a><br />385   <font color="#009999">    * A convenience function for fetching a node reference to an element by</font><a name="a386"></a><br />386   <font color="#009999">    * specifying only it's name.</font><a name="a387"></a><br />387   <font color="#009999">    *</font><a name="a388"></a><br />388   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999">   </font><em>uri </em><font color="#009999">    </font><font color="#009999">name of the element whose node is to be returned</font><a name="a389"></a><br />389   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999">   </font><em>integer </em><font color="#009999"></font><font color="#009999">index of which node to return (0 for first)</font><a name="a390"></a><br />390   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@return </font></strong><font color="#009999">  </font><em>node </em><a name="a391"></a><br />391   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@access</font></strong><font color="#009999">   public</font><a name="a392"></a><br />392   <font color="#009999">    */</font><a name="a393"></a><br />393       <font color="blue">function</font> <strong>&amp;</strong><a href="../XAO/DomDoc.html#methodndGetOneEl">ndGetOneEl</a><strong>(</strong><strong><font color="#008000">$strName</font></strong><strong>,</strong><strong><font color="#008000">$intIdx</font></strong>=0<strong>)</strong> <strong>{</strong><a name="a394"></a><br />394           <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong>_TestForConstuctor<strong>(</strong><strong>)</strong>;<a name="a395"></a><br />395           <strong><font color="#008000">$arrNds</font></strong> = <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#var$objDoc">objDoc</a><strong>-&gt;</strong>get_elements_by_tagname<strong>(</strong><strong><font color="#008000">$strName</font></strong><strong>)</strong>;<a name="a396"></a><br />396           <font color="blue">if</font><strong>(</strong>isset<strong>(</strong><strong><font color="#008000">$arrNds</font></strong><strong>[</strong><strong><font color="#008000">$intIdx</font></strong><strong>]</strong><strong>)</strong><strong>)</strong> <font color="blue">return</font> <strong><font color="#008000">$arrNds</font></strong><strong>[</strong><strong><font color="#008000">$intIdx</font></strong><strong>]</strong>;<a name="a397"></a><br />397           <font color="blue">return</font> false;<a name="a398"></a><br />398       <strong>}</strong><a name="a399"></a><br />399       <a name="a400"></a><br />400       <font color="#009999">/**</font><a name="a401"></a><br />401   <font color="#009999">    * quickly add a new element under the root element.</font><a name="a402"></a><br />402   <font color="#009999">    *</font><a name="a403"></a><br />403   <font color="#009999">    * This function is basically a shortcut for the common task of adding a new</font><a name="a404"></a><br />404   <font color="#009999">    * element with some content under the root element of the document.</font><a name="a405"></a><br />405   <font color="#009999">    *</font><a name="a406"></a><br />406   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999">   </font><em>string </em><font color="#009999"> </font><font color="#009999">the name of the new element</font><a name="a407"></a><br />407   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999">   </font><em>string </em><font color="#009999"> </font><font color="#009999">the content of the new element</font><a name="a408"></a><br />408   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@return </font></strong><font color="#009999">  </font><em>node </em><font color="#009999">   </font><font color="#009999">the newly added element node object</font><a name="a409"></a><br />409   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@access</font></strong><font color="#009999">   public</font><a name="a410"></a><br />410   <font color="#009999">    */</font><a name="a411"></a><br />411       <font color="blue">function</font> <strong>&amp;</strong><a href="../XAO/DomDoc.html#methodndAppendToRoot">ndAppendToRoot</a><strong>(</strong><strong><font color="#008000">$strElName</font></strong><strong>,</strong><strong><font color="#008000">$strCont</font></strong> = <font color="#ff702b">&quot;&quot;</font><strong>)</strong> <strong>{</strong><a name="a412"></a><br />412           <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong>_TestForConstuctor<strong>(</strong><strong>)</strong>;<a name="a413"></a><br />413           <font color="blue">if</font><strong>(</strong><strong>!</strong><strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#methodblnTestXmlName">blnTestXmlName</a><strong>(</strong><strong><font color="#008000">$strElName</font></strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a414"></a><br />414               <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#methodThrow">Throw</a><strong>(</strong><a name="a415"></a><br />415                       <font color="#ff702b">&quot;ndAppendToRoot: &quot;</font>.<strong><font color="#008000">$strElName</font></strong><a name="a416"></a><br />416                       .<font color="#ff702b">&quot; Is not a valid element name.&quot;</font><strong>,</strong><a name="a417"></a><br />417                       <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/XaoRoot.html#methodarrSetErrFnc">arrSetErrFnc</a><strong>(</strong>__FUNCTION__<strong>,</strong>__LINE__<strong>)</strong><a name="a418"></a><br />418                   <strong>)</strong>;<a name="a419"></a><br />419               <font color="blue">return</font> false;<a name="a420"></a><br />420           <strong>}</strong><a name="a421"></a><br />421           <strong><font color="#008000">$elNew</font></strong> = <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#var$objDoc">objDoc</a><strong>-&gt;</strong>create_element<strong>(</strong><strong><font color="#008000">$strElName</font></strong><strong>)</strong>;<a name="a422"></a><br />422           <strong><font color="#008000">$ndNew</font></strong> = <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#var$ndRoot">ndRoot</a><strong>-&gt;</strong>append_child<strong>(</strong><strong><font color="#008000">$elNew</font></strong><strong>)</strong>;<a name="a423"></a><br />423           <strong><font color="#008000">$ndNew</font></strong><strong>-&gt;</strong>set_content<strong>(</strong><strong><font color="#008000">$strCont</font></strong><strong>)</strong>;<a name="a424"></a><br />424           <font color="blue">return</font> <strong><font color="#008000">$ndNew</font></strong>;<a name="a425"></a><br />425       <strong>}</strong><a name="a426"></a><br />426   <a name="a427"></a><br />427       <font color="#009999">/**</font><a name="a428"></a><br />428   <font color="#009999">    * quickly add a new element under an exising element node.</font><a name="a429"></a><br />429   <font color="#009999">    *</font><a name="a430"></a><br />430   <font color="#009999">    * This function is basically a shortcut for the common task of adding a new</font><a name="a431"></a><br />431   <font color="#009999">    * element with some content under an existing node of the document.</font><a name="a432"></a><br />432   <font color="#009999">    *</font><a name="a433"></a><br />433   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999">   </font><em>node </em><font color="#009999">   </font><font color="#009999">a reference to the exisitng element node</font><a name="a434"></a><br />434   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999">   </font><em>string </em><font color="#009999"> </font><font color="#009999">the name of the new element</font><a name="a435"></a><br />435   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999">   </font><em>string </em><font color="#009999"> </font><font color="#009999">the content of the new element</font><a name="a436"></a><br />436   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@return </font></strong><font color="#009999">  </font><em>node </em><font color="#009999">   </font><font color="#009999">the newly added element node object</font><a name="a437"></a><br />437   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@access</font></strong><font color="#009999">   public</font><a name="a438"></a><br />438   <font color="#009999">    */</font><a name="a439"></a><br />439       <font color="blue">function</font> <strong>&amp;</strong><a href="../XAO/DomDoc.html#methodndAppendToNode">ndAppendToNode</a><strong>(</strong><strong>&amp;</strong><strong><font color="#008000">$ndStub</font></strong><strong>,</strong><strong><font color="#008000">$strElName</font></strong><strong>,</strong><strong><font color="#008000">$strCont</font></strong> = <font color="#ff702b">&quot;&quot;</font><strong>)</strong> <strong>{</strong><a name="a440"></a><br />440           <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong>_TestForConstuctor<strong>(</strong><strong>)</strong>;<a name="a441"></a><br />441           <font color="blue">if</font><strong>(</strong><strong>!</strong><strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#methodblnTestElementNode">blnTestElementNode</a><strong>(</strong><strong><font color="#008000">$ndStub</font></strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a442"></a><br />442               <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#methodThrow">Throw</a><strong>(</strong><a name="a443"></a><br />443                   <font color="#ff702b">&quot;ndAppendToNode: First argument is not a valid element node.&quot;</font><strong>,</strong><a name="a444"></a><br />444                   <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/XaoRoot.html#methodarrSetErrFnc">arrSetErrFnc</a><strong>(</strong>__FUNCTION__<strong>,</strong>__LINE__<strong>)</strong><a name="a445"></a><br />445               <strong>)</strong>;<a name="a446"></a><br />446               <font color="blue">return</font> false;<a name="a447"></a><br />447           <strong>}</strong><a name="a448"></a><br />448           <font color="blue">if</font><strong>(</strong><strong>!</strong><strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#methodblnTestXmlName">blnTestXmlName</a><strong>(</strong><strong><font color="#008000">$strElName</font></strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a449"></a><br />449               <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#methodThrow">Throw</a><strong>(</strong><a name="a450"></a><br />450                       <font color="#ff702b">&quot;ndAppendToNode: &quot;</font>.<strong><font color="#008000">$strElName</font></strong><a name="a451"></a><br />451                       .<font color="#ff702b">&quot; Is not a valid element name.&quot;</font><strong>,</strong><a name="a452"></a><br />452                       <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/XaoRoot.html#methodarrSetErrFnc">arrSetErrFnc</a><strong>(</strong>__FUNCTION__<strong>,</strong>__LINE__<strong>)</strong><a name="a453"></a><br />453                   <strong>)</strong>;<a name="a454"></a><br />454               <font color="blue">return</font> false;<a name="a455"></a><br />455           <strong>}</strong><a name="a456"></a><br />456           <strong><font color="#008000">$elNew</font></strong> = <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#var$objDoc">objDoc</a><strong>-&gt;</strong>create_element<strong>(</strong><strong><font color="#008000">$strElName</font></strong><strong>)</strong>;<a name="a457"></a><br />457           <strong><font color="#008000">$ndNew</font></strong> = <strong><font color="#008000">$ndStub</font></strong><strong>-&gt;</strong>append_child<strong>(</strong><strong><font color="#008000">$elNew</font></strong><strong>)</strong>;<a name="a458"></a><br />458           <strong><font color="#008000">$ndNew</font></strong><strong>-&gt;</strong>set_content<strong>(</strong><strong><font color="#008000">$strCont</font></strong><strong>)</strong>;<a name="a459"></a><br />459           <font color="blue">return</font> <strong><font color="#008000">$ndNew</font></strong>;<a name="a460"></a><br />460       <strong>}</strong><a name="a461"></a><br />461   <a name="a462"></a><br />462       <font color="#009999">/**</font><a name="a463"></a><br />463   <font color="#009999">    * Import a fragment from a foreign PHP DOM XML document</font><a name="a464"></a><br />464   <font color="#009999">    *</font><a name="a465"></a><br />465   <font color="#009999">    * This function will import a fragment from a foreign PHP DOM XML document</font><a name="a466"></a><br />466   <font color="#009999">    * below the node specified in the first parameter. This function is</font><a name="a467"></a><br />467   <font color="#009999">    * especially used by the other Consume methods in this class.</font><a name="a468"></a><br />468   <font color="#009999">    * At the moment it EXPLOITS the fact that node::replace_node() allows the</font><a name="a469"></a><br />469   <font color="#009999">    * use of foreign DOM XML objects - this is not in the spec.</font><a name="a470"></a><br />470   <font color="#009999">    * So this behaviour cannot be relied upon. It's worth noting that there</font><a name="a471"></a><br />471   <font color="#009999">    * is an xinclude() function which looks like it might be the way to go but</font><a name="a472"></a><br />472   <font color="#009999">    * documentation is vague http://www.xmlsoft.org/html/libxml-xinclude.html</font><a name="a473"></a><br />473   <font color="#009999">    * http://www.php.net/manual/en/function.domdocument-xinclude.php</font><a name="a474"></a><br />474   <font color="#009999">    * in any case, all maintenance for this functionality is centralised at this</font><a name="a475"></a><br />475   <font color="#009999">    * one point in the XAO api. If neccesary, it may eploy different techniques</font><a name="a476"></a><br />476   <font color="#009999">    * based on detecting which version of php/domxml is in use. Needless to say</font><a name="a477"></a><br />477   <font color="#009999">    * that this function is PIVOTAL to the XAO framework concept which uses</font><a name="a478"></a><br />478   <font color="#009999">    * aggregation to accumulate content through the CONSUME methods.</font><a name="a479"></a><br />479   <font color="#009999">    *</font><a name="a480"></a><br />480   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999">   </font><em>node </em><font color="#009999">   </font><font color="#009999">the node under which the fragment is to be grafted</font><a name="a481"></a><br />481   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999">   </font><em>node </em><font color="#009999">   </font><font color="#009999">foreign node containing the fragment to be imported</font><a name="a482"></a><br />482   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@return </font></strong><font color="#009999">  </font><em>node </em><font color="#009999">   </font><font color="#009999">the newly added element node object</font><a name="a483"></a><br />483   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@access</font></strong><font color="#009999">   public</font><a name="a484"></a><br />484   <font color="#009999">    */</font><a name="a485"></a><br />485       <font color="blue">function</font> <strong>&amp;</strong><a href="../XAO/DomDoc.html#methodndImportChildFrag">ndImportChildFrag</a><strong>(</strong><strong>&amp;</strong><strong><font color="#008000">$ndStub</font></strong><strong>,</strong><strong>&amp;</strong><strong><font color="#008000">$ndNew</font></strong><strong>)</strong> <strong>{</strong><a name="a486"></a><br />486           <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong>_TestForConstuctor<strong>(</strong><strong>)</strong>;<a name="a487"></a><br />487           <font color="blue">if</font><strong>(</strong><strong>!</strong><strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#methodblnTestElementNode">blnTestElementNode</a><strong>(</strong><strong><font color="#008000">$ndStub</font></strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a488"></a><br />488               <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#methodThrow">Throw</a><strong>(</strong><a name="a489"></a><br />489                   <font color="#ff702b">&quot;ndImportChildFrag: First argument is not a valid element node.&quot;</font><a name="a490"></a><br />490                   <strong>,</strong><strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/XaoRoot.html#methodarrSetErrFnc">arrSetErrFnc</a><strong>(</strong>__FUNCTION__<strong>,</strong>__LINE__<strong>)</strong><a name="a491"></a><br />491               <strong>)</strong>;<a name="a492"></a><br />492               <font color="blue">return</font> false;<a name="a493"></a><br />493           <strong>}</strong><a name="a494"></a><br />494           <font color="blue">if</font><strong>(</strong><strong>!</strong><strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#methodblnTestElementNode">blnTestElementNode</a><strong>(</strong><strong><font color="#008000">$ndNew</font></strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a495"></a><br />495               <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#methodThrow">Throw</a><strong>(</strong><a name="a496"></a><br />496                   <font color="#ff702b">&quot;ndImportChildFrag: Second argument is not a valid element&quot;</font><a name="a497"></a><br />497                   .<font color="#ff702b">&quot; node.&quot;</font><strong>,</strong> <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/XaoRoot.html#methodarrSetErrFnc">arrSetErrFnc</a><strong>(</strong>__FUNCTION__<strong>,</strong>__LINE__<strong>)</strong><a name="a498"></a><br />498               <strong>)</strong>;<a name="a499"></a><br />499               <font color="blue">return</font> false;<a name="a500"></a><br />500           <strong>}</strong><a name="a501"></a><br />501           <strong><font color="#008000">$ndTmp</font></strong> = <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#var$objDoc">objDoc</a><strong>-&gt;</strong>create_element<strong>(</strong><font color="#ff702b">&quot;tmp&quot;</font><strong>)</strong>;<a name="a502"></a><br />502           <strong><font color="#008000">$ndTmp</font></strong> = <strong><font color="#008000">$ndStub</font></strong><strong>-&gt;</strong>append_child<strong>(</strong><strong><font color="#008000">$ndTmp</font></strong><strong>)</strong>;<a name="a503"></a><br />503           <strong><font color="#008000">$ndTmp</font></strong><strong>-&gt;</strong>replace_node<strong>(</strong><strong><font color="#008000">$ndNew</font></strong><strong>)</strong>;<a name="a504"></a><br />504           <font color="blue">return</font> <strong><font color="#008000">$ndNew</font></strong>;<a name="a505"></a><br />505       <strong>}</strong><a name="a506"></a><br />506   <a name="a507"></a><br />507       <font color="#009999">/**</font><a name="a508"></a><br />508   <font color="#009999">    * Import a foreign PHP DOM XML document and append it below $this-&gt;ndRoot</font><a name="a509"></a><br />509   <font color="#009999">    *</font><a name="a510"></a><br />510   <font color="#009999">    * This function will consume the contents of an entire DOM document and</font><a name="a511"></a><br />511   <font color="#009999">    * retain it below the root node of this DomDoc.</font><a name="a512"></a><br />512   <font color="#009999">    *</font><a name="a513"></a><br />513   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999">   </font><em>DomDoc </em><font color="#009999"> </font><font color="#009999">a reference to an exising PHP DOM XML document</font><a name="a514"></a><br />514   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999">   </font><em>node </em><font color="#009999">   </font><font color="#009999">an optional stub node to which the new data is grafted</font><a name="a515"></a><br />515   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@access</font></strong><font color="#009999">   public</font><a name="a516"></a><br />516   <font color="#009999">    */</font><a name="a517"></a><br />517       <font color="blue">function</font> <strong>&amp;</strong><a href="../XAO/DomDoc.html#methodndConsumeDoc">ndConsumeDoc</a><strong>(</strong><strong>&amp;</strong><strong><font color="#008000">$objDoc</font></strong><strong>,</strong><strong><font color="#008000">$ndStub</font></strong> = null<strong>)</strong> <strong>{</strong><a name="a518"></a><br />518           <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong>_TestForConstuctor<strong>(</strong><strong>)</strong>;<a name="a519"></a><br />519           <font color="blue">if</font><strong>(</strong><strong>!</strong><a href="http://www.php.net/is_object">is_object</a><strong>(</strong><strong><font color="#008000">$objDoc</font></strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a520"></a><br />520               <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#methodThrow">Throw</a><strong>(</strong><a name="a521"></a><br />521                   <font color="#ff702b">&quot;ndConsumeDoc: No DomDoc object given&quot;</font><strong>,</strong><a name="a522"></a><br />522                   <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/XaoRoot.html#methodarrSetErrFnc">arrSetErrFnc</a><strong>(</strong>__FUNCTION__<strong>,</strong>__LINE__<strong>)</strong><a name="a523"></a><br />523               <strong>)</strong>;<a name="a524"></a><br />524           <strong>}</strong><a name="a525"></a><br />525           elseif<strong>(</strong><strong>!</strong>isset<strong>(</strong><strong><font color="#008000">$objDoc</font></strong><strong>-&gt;</strong>ndRoot<strong>)</strong><strong>)</strong> <strong>{</strong><a name="a526"></a><br />526               <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#methodThrow">Throw</a><strong>(</strong><a name="a527"></a><br />527                   <font color="#ff702b">&quot;ndConsumeDoc: No root node. First param must be an XAO &quot;</font><a name="a528"></a><br />528                   .<font color="#ff702b">&quot;DomDoc, not just a basic PHP DOMXML object. Use the &quot;</font><a name="a529"></a><br />529                   .<font color="#ff702b">&quot;DomFactory class if you need to convert an existing PHP &quot;</font><a name="a530"></a><br />530                   .<font color="#ff702b">&quot;DOMXML object.&quot;</font><strong>,</strong><a name="a531"></a><br />531                   <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/XaoRoot.html#methodarrSetErrFnc">arrSetErrFnc</a><strong>(</strong>__FUNCTION__<strong>,</strong>__LINE__<strong>)</strong><a name="a532"></a><br />532               <strong>)</strong>;<a name="a533"></a><br />533           <strong>}</strong><a name="a534"></a><br />534           else <strong>{</strong><a name="a535"></a><br />535               <font color="blue">if</font><strong>(</strong><strong>!</strong><strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#methodblnTestElementNode">blnTestElementNode</a><strong>(</strong><strong><font color="#008000">$ndStub</font></strong><strong>)</strong><strong>)</strong> <strong><font color="#008000">$ndStub</font></strong> = <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#var$ndRoot">ndRoot</a>;<a name="a536"></a><br />536               <font color="blue">return</font> <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#methodndImportChildFrag">ndImportChildFrag</a><strong>(</strong><strong><font color="#008000">$ndStub</font></strong><strong>,</strong><strong><font color="#008000">$objDoc</font></strong><strong>-&gt;</strong>ndRoot<strong>)</strong>;<a name="a537"></a><br />537           <strong>}</strong><a name="a538"></a><br />538           <font color="blue">return</font> false;<a name="a539"></a><br />539       <strong>}</strong><a name="a540"></a><br />540   <a name="a541"></a><br />541       <font color="#009999">/**</font><a name="a542"></a><br />542   <font color="#009999">    * Import an XML document from a file and append it below $this-&gt;ndRoot</font><a name="a543"></a><br />543   <font color="#009999">    *</font><a name="a544"></a><br />544   <font color="#009999">    * This function will consume the contents of an entire XML document from a</font><a name="a545"></a><br />545   <font color="#009999">    * file and retain it below the root node of this DomDoc.</font><a name="a546"></a><br />546   <font color="#009999">    *</font><a name="a547"></a><br />547   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999">   </font><em>uri </em><font color="#009999">    </font><font color="#009999">the location of the XML file</font><a name="a548"></a><br />548   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@access</font></strong><font color="#009999">   public</font><a name="a549"></a><br />549   <font color="#009999">    */</font><a name="a550"></a><br />550       <font color="blue">function</font> <a href="../XAO/DomDoc.html#methodndConsumeFile">ndConsumeFile</a><strong>(</strong><strong><font color="#008000">$uri</font></strong><strong>,</strong><strong><font color="#008000">$ndStub</font></strong> = null<strong>)</strong> <strong>{</strong><a name="a551"></a><br />551                                           <font color="#a0a0a4">// If there are any parse errors, then</font><a name="a552"></a><br />552                                           <font color="#a0a0a4">// they will be included in the object</font><a name="a553"></a><br />553                                           <font color="#a0a0a4">// returned by DomDoc. It's up to the</font><a name="a554"></a><br />554                                           <font color="#a0a0a4">// stylsheet to extract them.</font><a name="a555"></a><br />555           <strong><font color="#008000">$objDoc</font></strong> = new <a href="../XAO/DomDoc.html#methodDomDoc">DomDoc</a><strong>(</strong><strong><font color="#008000">$uri</font></strong><strong>,</strong><a href="../XAO/_classes_XAO_DomDoc_php.html#defineXAO_DOC_READFILE">XAO_DOC_READFILE</a><strong>)</strong>;<a name="a556"></a><br />556                                           <font color="#a0a0a4">// The new DomDoc is inevitably grafted</font><a name="a557"></a><br />557                                           <font color="#a0a0a4">// on to this DomDoc - errors and all.</font><a name="a558"></a><br />558           <font color="blue">if</font><strong>(</strong><strong>!</strong><strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#methodblnTestElementNode">blnTestElementNode</a><strong>(</strong><strong><font color="#008000">$ndStub</font></strong><strong>)</strong><strong>)</strong> <strong><font color="#008000">$ndStub</font></strong> = <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#var$ndRoot">ndRoot</a>;<a name="a559"></a><br />559           <font color="blue">return</font> <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#methodndImportChildFrag">ndImportChildFrag</a><strong>(</strong><strong><font color="#008000">$ndStub</font></strong><strong>,</strong><strong><font color="#008000">$objDoc</font></strong><strong>-&gt;</strong>ndRoot<strong>)</strong>;<a name="a560"></a><br />560       <strong>}</strong><a name="a561"></a><br />561       <a name="a562"></a><br />562       <font color="#009999">/**</font><a name="a563"></a><br />563   <font color="#009999">    * Import well-balenced XML data to append below $this-&gt;ndRoot</font><a name="a564"></a><br />564   <font color="#009999">    *</font><a name="a565"></a><br />565   <font color="#009999">    * This function will consume the contents of some XML data after wrapping</font><a name="a566"></a><br />566   <font color="#009999">    * it in a root element whos name is specified in the second parameter. The</font><a name="a567"></a><br />567   <font color="#009999">    * content is then retained under $this-&gt;ndRoot</font><a name="a568"></a><br />568   <font color="#009999">    *</font><a name="a569"></a><br />569   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999">   </font><em>xml </em><font color="#009999">    </font><font color="#009999">Miscellaneous XML data</font><a name="a570"></a><br />570   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999">   </font><em>string </em><font color="#009999"> </font><font color="#009999">The name of the root element</font><a name="a571"></a><br />571   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@access</font></strong><font color="#009999">   public</font><a name="a572"></a><br />572   <font color="#009999">    */</font><a name="a573"></a><br />573       <font color="blue">function</font> <a href="../XAO/DomDoc.html#methodndConsumeFragData">ndConsumeFragData</a><strong>(</strong><strong><font color="#008000">$str</font></strong><strong>,</strong><strong><font color="#008000">$strRoot</font></strong><strong>,</strong><strong><font color="#008000">$ndStub</font></strong> = null<strong>)</strong> <strong>{</strong><a name="a574"></a><br />574           <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong>_TestForConstuctor<strong>(</strong><strong>)</strong>;<a name="a575"></a><br />575                                           <font color="#a0a0a4">// this regex needs to be tested!</font><a name="a576"></a><br />576           <font color="blue">if</font><strong>(</strong><strong>!</strong><strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#methodblnTestXmlName">blnTestXmlName</a><strong>(</strong><strong><font color="#008000">$strRoot</font></strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a577"></a><br />577               <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#methodThrow">Throw</a><strong>(</strong><a name="a578"></a><br />578                   <font color="#ff702b">&quot;ndConsumeFragData: &quot;</font>.<strong><font color="#008000">$strRoot</font></strong><a name="a579"></a><br />579                   .<font color="#ff702b">&quot; is an invalid name for root element.&quot;</font><strong>,</strong><a name="a580"></a><br />580                   <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/XaoRoot.html#methodarrSetErrFnc">arrSetErrFnc</a><strong>(</strong>__FUNCTION__<strong>,</strong>__LINE__<strong>)</strong><a name="a581"></a><br />581               <strong>)</strong>;<a name="a582"></a><br />582           <strong>}</strong><a name="a583"></a><br />583           else <strong>{</strong><a name="a584"></a><br />584                                           <font color="#a0a0a4">// wrap the fragment data in a basic</font><a name="a585"></a><br />585                                           <font color="#a0a0a4">// XML envelope</font><a name="a586"></a><br />586               <strong><font color="#008000">$str</font></strong> = <font color="#ff702b">&quot;&lt;&quot;</font>.<font color="#ff702b">&quot;?xml version=\&quot;1.0\&quot;?&quot;</font>.<font color="#ff702b">&quot;&gt;\n&lt;&quot;</font>.<strong><font color="#008000">$strRoot</font></strong>.<font color="#ff702b">&quot;&gt;&quot;</font><a name="a587"></a><br />587                   .<strong><font color="#008000">$str</font></strong>.<font color="#ff702b">&quot;&lt;/&quot;</font>.<strong><font color="#008000">$strRoot</font></strong>.<font color="#ff702b">&quot;&gt;&quot;</font>;<a name="a588"></a><br />588                                           <font color="#a0a0a4">// If there are any parse errors, then</font><a name="a589"></a><br />589                                           <font color="#a0a0a4">// they will be included in the object</font><a name="a590"></a><br />590                                           <font color="#a0a0a4">// returned by DomDoc. It's up to the</font><a name="a591"></a><br />591                                           <font color="#a0a0a4">// stylsheet to extract them.</font><a name="a592"></a><br />592               <strong><font color="#008000">$objDoc</font></strong> = new <a href="../XAO/DomDoc.html#methodDomDoc">DomDoc</a><strong>(</strong><strong><font color="#008000">$str</font></strong><strong>,</strong><a href="../XAO/_classes_XAO_DomDoc_php.html#defineXAO_DOC_DATA">XAO_DOC_DATA</a><strong>)</strong>;<a name="a593"></a><br />593                                           <font color="#a0a0a4">// The new DomDoc is inevitably grafted</font><a name="a594"></a><br />594                                           <font color="#a0a0a4">// on to this DomDoc - errors and all.</font><a name="a595"></a><br />595               <font color="blue">if</font><strong>(</strong><strong>!</strong><strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#methodblnTestElementNode">blnTestElementNode</a><strong>(</strong><strong><font color="#008000">$ndStub</font></strong><strong>)</strong><strong>)</strong> <strong><font color="#008000">$ndStub</font></strong> = <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#var$ndRoot">ndRoot</a>;<a name="a596"></a><br />596               <font color="blue">return</font> <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#methodndImportChildFrag">ndImportChildFrag</a><strong>(</strong><strong><font color="#008000">$ndStub</font></strong><strong>,</strong><strong><font color="#008000">$objDoc</font></strong><strong>-&gt;</strong>ndRoot<strong>)</strong>;<a name="a597"></a><br />597           <strong>}</strong><a name="a598"></a><br />598       <strong>}</strong><a name="a599"></a><br />599       <a name="a600"></a><br />600       <font color="#009999">/**</font><a name="a601"></a><br />601   <font color="#009999">    * Import well-balenced XML data to append below $this-&gt;ndRoot</font><a name="a602"></a><br />602   <font color="#009999">    *</font><a name="a603"></a><br />603   <font color="#009999">    * This function will consume the contents of an XML document.The</font><a name="a604"></a><br />604   <font color="#009999">    * content is then retained under $this-&gt;ndRoot</font><a name="a605"></a><br />605   <font color="#009999">    *</font><a name="a606"></a><br />606   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999">   </font><em>xml </em><font color="#009999">    </font><font color="#009999">Miscellaneous XML data</font><a name="a607"></a><br />607   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@access</font></strong><font color="#009999">   public</font><a name="a608"></a><br />608   <font color="#009999">    */</font><a name="a609"></a><br />609       <font color="blue">function</font> <a href="../XAO/DomDoc.html#methodConsumeDocData">ConsumeDocData</a><strong>(</strong><strong><font color="#008000">$str</font></strong><strong>)</strong> <strong>{</strong><a name="a610"></a><br />610           <strong><font color="#008000">$objDoc</font></strong> = new <a href="../XAO/DomDoc.html#methodDomDoc">DomDoc</a><strong>(</strong><strong><font color="#008000">$str</font></strong><strong>,</strong><a href="../XAO/_classes_XAO_DomDoc_php.html#defineXAO_DOC_DATA">XAO_DOC_DATA</a><strong>)</strong>;<a name="a611"></a><br />611           <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong>ImportChildFrag<strong>(</strong><strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#var$ndRoot">ndRoot</a><strong>,</strong><strong><font color="#008000">$objDoc</font></strong><strong>-&gt;</strong>ndRoot<strong>)</strong>;<a name="a612"></a><br />612       <strong>}</strong><a name="a613"></a><br />613   <a name="a614"></a><br />614       <font color="#009999">/**</font><a name="a615"></a><br />615   <font color="#009999">    * Test to see if the DomDoc constructor has been run</font><a name="a616"></a><br />616   <font color="#009999">    *</font><a name="a617"></a><br />617   <font color="#009999">    * This needs to be done for the sake of developers who can't figure out why</font><a name="a618"></a><br />618   <font color="#009999">    * their script dies when inheriting from DomDoc. If $this-&gt;DomDoc is</font><a name="a619"></a><br />619   <font color="#009999">    * not executed somewhere before one of the other methods on this class is</font><a name="a620"></a><br />620   <font color="#009999">    * called, then most of them won't work - including $this-&gt;Throw()!!!!!!</font><a name="a621"></a><br />621   <font color="#009999">    * This function is designed to check that and broadcast a dirty great</font><a name="a622"></a><br />622   <font color="#009999">    * message announcing the fact. It's a bit of a hack but it's provided for</font><a name="a623"></a><br />623   <font color="#009999">    * &quot;extra&quot; safety which should make life easier for the absent-minded</font><a name="a624"></a><br />624   <font color="#009999">    * developer.</font><a name="a625"></a><br />625   <font color="#009999">    *</font><a name="a626"></a><br />626   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@access</font></strong><font color="#009999">   private</font><a name="a627"></a><br />627   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@return </font></strong><font color="#009999">  </font><em>void </em><a name="a628"></a><br />628   <font color="#009999">    */</font><a name="a629"></a><br />629       <font color="blue">function</font> _TestForConstuctor<strong>(</strong><strong>)</strong> <strong>{</strong><a name="a630"></a><br />630                                               <font color="#a0a0a4">// The existance of $this-&gt;objDoc is</font><a name="a631"></a><br />631                                               <font color="#a0a0a4">// garenteed. Even if the constructor</font><a name="a632"></a><br />632                                               <font color="#a0a0a4">// fails to initialise one, then</font><a name="a633"></a><br />633                                               <font color="#a0a0a4">// $this-&gt;_AbortDocument should be </font><a name="a634"></a><br />634                                               <font color="#a0a0a4">// called which provides a surrogate.</font><a name="a635"></a><br />635           <font color="blue">if</font><strong>(</strong><strong>!</strong><a href="http://www.php.net/is_object">is_object</a><strong>(</strong><strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#var$objDoc">objDoc</a><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a636"></a><br />636               <strong><font color="#008000">$strThis</font></strong> = <font color="#ff702b">&quot;DomDoc&quot;</font>;<a name="a637"></a><br />637                                           <font color="#a0a0a4">// try to find out the names of classes</font><a name="a638"></a><br />638                                           <font color="#a0a0a4">// used to inherit DomDoc and use this</font><a name="a639"></a><br />639                                           <font color="#a0a0a4">// information to produce a [hopefully]</font><a name="a640"></a><br />640                                           <font color="#a0a0a4">// helpful warning.</font><a name="a641"></a><br />641               <strong><font color="#008000">$strParent</font></strong> = <a href="http://www.php.net/get_parent_class">get_parent_class</a><strong>(</strong><strong><font color="#008000">$this</font></strong><strong>)</strong>;<a name="a642"></a><br />642               <strong><font color="#008000">$strYoungest</font></strong> = <a href="http://www.php.net/get_class">get_class</a><strong>(</strong><strong><font color="#008000">$this</font></strong><strong>)</strong>;<a name="a643"></a><br />643               <strong><font color="#008000">$msg</font></strong> = &quot;<a name="a644"></a><br />644         <font color="#ff702b">                &lt;h1&gt;MASSAGEFORTHEPROGRAMMER: <strong><font color="#008000">$strThis</font></strong>constructornotcalled!&lt;/h1&gt;</font><a name="a645"></a><br />645            <font color="#ff702b">                &lt;p&gt;Youaretryingtoaccessmethodson<strong><font color="#008000">$strThis</font></strong>withoutrunning</font><a name="a646"></a><br />646                   &quot;.<strong><font color="#008000">$strThis</font></strong>.&quot;<strong>-&gt;</strong>DomDoc()&lt;/p&gt;<a name="a647"></a><br />647                   &lt;p&gt;The immediate parent to <strong><font color="#008000">$strThis</font></strong> is <strong><font color="#008000">$strParent</font></strong> . You probably<a name="a648"></a><br />648                   need to call &quot;.<strong><font color="#008000">$strThis</font></strong>.<font color="#ff702b">&quot;-&gt;DomDOc() in it's constructor. PHP</font><a name="a649"></a><br />649   <font color="#ff702b">                does not automatically call the constructor of the superclass</font><a name="a650"></a><br />650   <font color="#ff702b">                in a sub class's constructor.&lt;/p&gt;</font><a name="a651"></a><br />651   <font color="#ff702b">            &quot;</font>;<a name="a652"></a><br />652               <font color="blue">if</font><strong>(</strong><strong><font color="#008000">$strParent</font></strong> != <strong><font color="#008000">$strYoungest</font></strong><strong>)</strong> <strong>{</strong><a name="a653"></a><br />653                   <strong><font color="#008000">$msg</font></strong> .= <font color="#ff702b">&quot;</font><a name="a654"></a><br />654   <font color="#ff702b">                    &lt;p&gt;If you already called &quot;</font>.<strong><font color="#008000">$strThis</font></strong>.&quot;<strong>-&gt;</strong>DomDOc() from the<a name="a655"></a><br />655                       constructor in <strong><font color="#008000">$strParent</font></strong>, then you probably didn't call the<a name="a656"></a><br />656                       constructor for <strong><font color="#008000">$strParent</font></strong> in <strong><font color="#008000">$strYoungest</font></strong>. Assuming that<a name="a657"></a><br />657                       <strong><font color="#008000">$strYoungest</font></strong> is indeed a child of <strong><font color="#008000">$strParent</font></strong>.&lt;/p&gt;<a name="a658"></a><br />658                       &lt;p&gt;You're getting this ugly message because <strong><font color="#008000">$strThis</font></strong> <a name="a659"></a><br />659                       cannot handle exceptions nicely if it is not instantiated<a name="a660"></a><br />660                       properly.&lt;/p&gt;<a name="a661"></a><br />661                       &lt;p&gt;Below is a debug_backtrace() which should help trace<a name="a662"></a><br />662                       where the problem (method call) originated from.&lt;/p&gt;<a name="a663"></a><br />663                   &quot;;<a name="a664"></a><br />664               <strong>}</strong><a name="a665"></a><br />665               <strong><font color="#008000">$arr</font></strong> = <a href="http://www.php.net/debug_backtrace">debug_backtrace</a><strong>(</strong><strong>)</strong>;<a name="a666"></a><br />666               echo <strong><font color="#008000">$msg</font></strong>.<font color="#ff702b">&quot;&lt;pre&gt;&quot;</font>;<a name="a667"></a><br />667               <a href="http://www.php.net/var_dump">var_dump</a><strong>(</strong><strong><font color="#008000">$arr</font></strong><strong>)</strong>;<a name="a668"></a><br />668               echo<strong>(</strong><font color="#ff702b">&quot;&lt;/pre&gt;&quot;</font><strong>)</strong>;<a name="a669"></a><br />669               die<strong>(</strong><font color="#ff702b">&quot;&lt;h3&gt;Script execution terminated.&lt;/h3&gt;&quot;</font><strong>)</strong>;<a name="a670"></a><br />670           <strong>}</strong><a name="a671"></a><br />671       <strong>}</strong><a name="a672"></a><br />672       <a name="a673"></a><br />673       <a name="a674"></a><br />674       <font color="#009999">/**</font><a name="a675"></a><br />675   <font color="#009999">    * Turn an associative array into attributes</font><a name="a676"></a><br />676   <font color="#009999">    *</font><a name="a677"></a><br />677   <font color="#009999">    * The hash keys are used for the attribute names and the values are used</font><a name="a678"></a><br />678   <font color="#009999">    * for the attribute values.</font><a name="a679"></a><br />679   <font color="#009999">    *</font><a name="a680"></a><br />680   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999">   </font><em>node </em><a name="a681"></a><br />681   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999">   </font><em>array </em><a name="a682"></a><br />682   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@access</font></strong><font color="#009999">   public</font><a name="a683"></a><br />683   <font color="#009999">    */</font><a name="a684"></a><br />684       <font color="blue">function</font> <a href="../XAO/DomDoc.html#methodArr2Atts">Arr2Atts</a><strong>(</strong><strong>&amp;</strong><strong><font color="#008000">$ndEl</font></strong><strong>,</strong><strong><font color="#008000">$arrAttribs</font></strong><strong>)</strong> <strong>{</strong><a name="a685"></a><br />685       <font color="blue">if</font><strong>(</strong><strong>!</strong><strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#methodblnTestElementNode">blnTestElementNode</a><strong>(</strong><strong><font color="#008000">$ndEl</font></strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a686"></a><br />686           <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#methodThrow">Throw</a><strong>(</strong><a name="a687"></a><br />687               <font color="#ff702b">&quot;Arr2Atts: First argument is not a valid element node.&quot;</font><strong>,</strong><a name="a688"></a><br />688               <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/XaoRoot.html#methodarrSetErrFnc">arrSetErrFnc</a><strong>(</strong>__FUNCTION__<strong>,</strong>__LINE__<strong>)</strong><a name="a689"></a><br />689           <strong>)</strong>;<a name="a690"></a><br />690           <font color="blue">return</font> false;<a name="a691"></a><br />691       <strong>}</strong><a name="a692"></a><br />692   <a name="a693"></a><br />693       <font color="blue">foreach</font><strong>(</strong><strong><font color="#008000">$arrAttribs</font></strong> AS <strong><font color="#008000">$strName</font></strong> =&gt; <strong><font color="#008000">$strValue</font></strong><strong>)</strong> <strong>{</strong><a name="a694"></a><br />694               <strong><font color="#008000">$ndAttrib</font></strong> = <strong>@</strong><strong><font color="#008000">$ndEl</font></strong><strong>-&gt;</strong>set_attribute<strong>(</strong><strong><font color="#008000">$strName</font></strong><strong>,</strong><strong><font color="#008000">$strValue</font></strong><strong>)</strong>;<a name="a695"></a><br />695               <font color="blue">if</font><strong>(</strong><strong>!</strong><a href="http://www.php.net/is_object">is_object</a><strong>(</strong><strong><font color="#008000">$ndAttrib</font></strong><strong>)</strong><strong>)</strong> <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#methodThrow">Throw</a><strong>(</strong><a name="a696"></a><br />696                   <font color="#ff702b">&quot;Arr2Atts: Could not set attribute using &quot;</font><a name="a697"></a><br />697                   .<font color="#ff702b">&quot;NAME(\&quot;&quot;</font>.<strong><font color="#008000">$strName</font></strong>.<font color="#ff702b">&quot;\&quot;) and VALUE(\&quot;&quot;</font>.<strong><font color="#008000">$strValue</font></strong>.<font color="#ff702b">&quot;\&quot;).&quot;</font><strong>,</strong><a name="a698"></a><br />698                   <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/XaoRoot.html#methodarrSetErrFnc">arrSetErrFnc</a><strong>(</strong>__FUNCTION__<strong>,</strong>__LINE__<strong>)</strong><a name="a699"></a><br />699               <strong>)</strong>;<a name="a700"></a><br />700       <strong>}</strong><a name="a701"></a><br />701       <font color="blue">return</font> true;<a name="a702"></a><br />702       <strong>}</strong><a name="a703"></a><br />703       <a name="a704"></a><br />704       <font color="#009999">/**</font><a name="a705"></a><br />705   <font color="#009999">    * Use an XPath to nominate nodes for processing by a call-back function.</font><a name="a706"></a><br />706   <font color="#009999">    *</font><a name="a707"></a><br />707   <font color="#009999">    * This functionality is dubious when using namespaces. The experimental</font><a name="a708"></a><br />708   <font color="#009999">    * nature of PHP's DOMXML extension makes it impossible to guarentee safe</font><a name="a709"></a><br />709   <font color="#009999">    * usage.</font><a name="a710"></a><br />710   <font color="#009999">    *</font><a name="a711"></a><br />711   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999">   </font><em>string </em><font color="#009999"> </font><font color="#009999">XPath query</font><a name="a712"></a><br />712   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999">   </font><em>string </em><font color="#009999"> </font><font color="#009999">name of user-defined callback function</font><a name="a713"></a><br />713   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@access</font></strong><font color="#009999">   public</font><a name="a714"></a><br />714   <font color="#009999">    */</font><a name="a715"></a><br />715       <font color="blue">function</font> <a href="../XAO/DomDoc.html#methodSetCustomTagQuery">SetCustomTagQuery</a><strong>(</strong><strong><font color="#008000">$strQuery</font></strong><strong>,</strong><strong><font color="#008000">$fncName</font></strong><strong>)</strong> <strong>{</strong><a name="a716"></a><br />716           <font color="blue">if</font><strong>(</strong><a href="http://www.php.net/method_exists">method_exists</a><strong>(</strong><strong><font color="#008000">$this</font></strong><strong>,</strong><strong><font color="#008000">$fncName</font></strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a717"></a><br />717               <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><strong><font color="#008000">_arrCustomTagQueries</font></strong><strong>[</strong><strong>]</strong> = array<strong>(</strong><strong><font color="#008000">$strQuery</font></strong><strong>,</strong><strong><font color="#008000">$fncName</font></strong><strong>)</strong>;<a name="a718"></a><br />718           <strong>}</strong><a name="a719"></a><br />719           else <strong>{</strong><a name="a720"></a><br />720               <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#methodThrow">Throw</a><strong>(</strong><a name="a721"></a><br />721                   <font color="#ff702b">&quot;SetCustomTag: Method &quot;</font>.<strong><font color="#008000">$fncName</font></strong>.<font color="#ff702b">&quot; is undefined.&quot;</font><strong>,</strong><a name="a722"></a><br />722                   <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/XaoRoot.html#methodarrSetErrFnc">arrSetErrFnc</a><strong>(</strong>__FUNCTION__<strong>,</strong>__LINE__<strong>)</strong><a name="a723"></a><br />723               <strong>)</strong>;<a name="a724"></a><br />724           <strong>}</strong><a name="a725"></a><br />725       <strong>}</strong><a name="a726"></a><br />726       <a name="a727"></a><br />727       <font color="#009999">/**</font><a name="a728"></a><br />728   <font color="#009999">    * Have all elements of a specified name processed by a call-back function.</font><a name="a729"></a><br />729   <font color="#009999">    *</font><a name="a730"></a><br />730   <font color="#009999">    * This functionality is dubious when using namespaces. The experimental</font><a name="a731"></a><br />731   <font color="#009999">    * nature of PHP's DOMXML extension makes it impossible to guarentee safe</font><a name="a732"></a><br />732   <font color="#009999">    * usage.</font><a name="a733"></a><br />733   <font color="#009999">    *</font><a name="a734"></a><br />734   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999">   </font><em>string </em><font color="#009999"> </font><font color="#009999">name of element to be globally matched</font><a name="a735"></a><br />735   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999">   </font><em>string </em><font color="#009999"> </font><font color="#009999">name of user-defined callback function</font><a name="a736"></a><br />736   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@access</font></strong><font color="#009999">   public</font><a name="a737"></a><br />737   <font color="#009999">    */</font><a name="a738"></a><br />738       <font color="blue">function</font> <a href="../XAO/DomDoc.html#methodSetCustomTagName">SetCustomTagName</a><strong>(</strong><strong><font color="#008000">$elName</font></strong><strong>,</strong><strong><font color="#008000">$fncName</font></strong><strong>)</strong> <strong>{</strong><a name="a739"></a><br />739       <font color="blue">if</font><strong>(</strong><a href="http://www.php.net/method_exists">method_exists</a><strong>(</strong><strong><font color="#008000">$this</font></strong><strong>,</strong><strong><font color="#008000">$fncName</font></strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a740"></a><br />740           <font color="blue">if</font><strong>(</strong><strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#methodblnTestXmlName">blnTestXmlName</a><strong>(</strong><strong><font color="#008000">$elName</font></strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a741"></a><br />741               <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><strong><font color="#008000">_arrCustomTagNames</font></strong><strong>[</strong><strong><font color="#008000">$elName</font></strong><strong>]</strong> = <strong><font color="#008000">$fncName</font></strong>;<a name="a742"></a><br />742           <strong>}</strong><a name="a743"></a><br />743           else <strong>{</strong><a name="a744"></a><br />744               <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#methodThrow">Throw</a><strong>(</strong><a name="a745"></a><br />745                       <font color="#ff702b">&quot;SetCustomTag: &quot;</font>.<strong><font color="#008000">$elName</font></strong>.<font color="#ff702b">&quot; is not a valid tag name&quot;</font><strong>,</strong><a name="a746"></a><br />746                       <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/XaoRoot.html#methodarrSetErrFnc">arrSetErrFnc</a><strong>(</strong>__FUNCTION__<strong>,</strong>__LINE__<strong>)</strong><a name="a747"></a><br />747                   <strong>)</strong>;<a name="a748"></a><br />748           <strong>}</strong><a name="a749"></a><br />749       <strong>}</strong><a name="a750"></a><br />750       else <strong>{</strong><a name="a751"></a><br />751           <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#methodThrow">Throw</a><strong>(</strong><a name="a752"></a><br />752                   <font color="#ff702b">&quot;SetCustomTag: Method &quot;</font>.<strong><font color="#008000">$fncName</font></strong>.<font color="#ff702b">&quot; is undefined.&quot;</font><strong>,</strong><a name="a753"></a><br />753                   <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/XaoRoot.html#methodarrSetErrFnc">arrSetErrFnc</a><strong>(</strong>__FUNCTION__<strong>,</strong>__LINE__<strong>)</strong><a name="a754"></a><br />754               <strong>)</strong>;<a name="a755"></a><br />755       <strong>}</strong><a name="a756"></a><br />756       <strong>}</strong><a name="a757"></a><br />757       <a name="a758"></a><br />758       <font color="#009999">/**</font><a name="a759"></a><br />759   <font color="#009999">    * Process all nodes (domelements) due for processing.</font><a name="a760"></a><br />760   <font color="#009999">    *</font><a name="a761"></a><br />761   <font color="#009999">    * When the user has finished nominating all the nodes for processing using</font><a name="a762"></a><br />762   <font color="#009999">    * either SetCustomTagName() or SetCustomTagQuery(), then this function can</font><a name="a763"></a><br />763   <font color="#009999">    * be called. It's a good idea to make sure this is only called as many times</font><a name="a764"></a><br />764   <font color="#009999">    * as it needs to be (once).</font><a name="a765"></a><br />765   <font color="#009999">    *</font><a name="a766"></a><br />766   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@access</font></strong><font color="#009999">   public</font><a name="a767"></a><br />767   <font color="#009999">    */</font><a name="a768"></a><br />768       <font color="blue">function</font> <a href="../XAO/DomDoc.html#methodProcessCustomTags">ProcessCustomTags</a><strong>(</strong><strong>)</strong> <strong>{</strong><a name="a769"></a><br />769                                           <font color="#a0a0a4">// process all tag-name call-backs</font><a name="a770"></a><br />770       <font color="blue">foreach</font><strong>(</strong><strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><strong><font color="#008000">_arrCustomTagNames</font></strong> AS <strong><font color="#008000">$elName</font></strong> =&gt; <strong><font color="#008000">$fncName</font></strong><strong>)</strong> <strong>{</strong><a name="a771"></a><br />771           <strong><font color="#008000">$arrNd</font></strong> = <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#var$objDoc">objDoc</a><strong>-&gt;</strong>get_elements_by_tagname<strong>(</strong><strong><font color="#008000">$elName</font></strong><strong>)</strong>;<a name="a772"></a><br />772           <font color="blue">if</font><strong>(</strong><a href="http://www.php.net/is_array">is_array</a><strong>(</strong><strong><font color="#008000">$arrNd</font></strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a773"></a><br />773               <font color="blue">foreach</font> <strong>(</strong><strong><font color="#008000">$arrNd</font></strong> AS <strong><font color="#008000">$nd</font></strong><strong>)</strong> <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><strong><font color="#008000">$fncName</font></strong><strong>(</strong><strong><font color="#008000">$nd</font></strong><strong>)</strong>;<a name="a774"></a><br />774           <strong>}</strong><a name="a775"></a><br />775           else <strong>{</strong><a name="a776"></a><br />776           <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#methodThrow">Throw</a><strong>(</strong><a name="a777"></a><br />777                       <font color="#ff702b">&quot;ProcessCustomTags: there was an error searching for &quot;</font><a name="a778"></a><br />778                       .<strong><font color="#008000">$elName</font></strong>.<font color="#ff702b">&quot; in the document.&quot;</font><strong>,</strong><a name="a779"></a><br />779                       <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/XaoRoot.html#methodarrSetErrFnc">arrSetErrFnc</a><strong>(</strong>__FUNCTION__<strong>,</strong>__LINE__<strong>)</strong><a name="a780"></a><br />780                   <strong>)</strong>;<a name="a781"></a><br />781           <strong>}</strong><a name="a782"></a><br />782       <strong>}</strong><a name="a783"></a><br />783                                           <font color="#a0a0a4">// process all xpath query call-backs</font><a name="a784"></a><br />784       <font color="blue">foreach</font><strong>(</strong><strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><strong><font color="#008000">_arrCustomTagQueries</font></strong> AS <strong><font color="#008000">$arrQryFunc</font></strong><strong>)</strong> <strong>{</strong><a name="a785"></a><br />785            <strong><font color="#008000">$strQry</font></strong>  = <strong><font color="#008000">$arrQryFunc</font></strong><strong>[</strong>0<strong>]</strong>;<a name="a786"></a><br />786            <strong><font color="#008000">$fncName</font></strong> = <strong><font color="#008000">$arrQryFunc</font></strong><strong>[</strong>1<strong>]</strong>;<a name="a787"></a><br />787            <strong><font color="#008000">$arrNd</font></strong> = <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong>arrNdXPathGet<strong>(</strong><strong><font color="#008000">$strQry</font></strong><strong>)</strong>;<a name="a788"></a><br />788            <font color="blue">if</font><strong>(</strong><a href="http://www.php.net/is_array">is_array</a><strong>(</strong><strong><font color="#008000">$arrNd</font></strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a789"></a><br />789            <font color="blue">foreach</font><strong>(</strong><strong><font color="#008000">$arrNd</font></strong> AS <strong><font color="#008000">$nd</font></strong><strong>)</strong> <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><strong><font color="#008000">$fncName</font></strong><strong>(</strong><strong><font color="#008000">$nd</font></strong><strong>)</strong>;<a name="a790"></a><br />790            <strong>}</strong><a name="a791"></a><br />791            else <strong>{</strong><a name="a792"></a><br />792               <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#methodThrow">Throw</a><strong>(</strong><a name="a793"></a><br />793                       <font color="#ff702b">&quot;XPath query &quot;</font>.<strong><font color="#008000">$strQry</font></strong>.<font color="#ff702b">&quot; did not work. Unfortunately, the &quot;</font><a name="a794"></a><br />794                       .<font color="#ff702b">&quot;underlying DOMXML function does not give up any error &quot;</font><a name="a795"></a><br />795                       .<font color="#ff702b">&quot;information to pass on. Sorry.&quot;</font><strong>,</strong><a name="a796"></a><br />796                       <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/XaoRoot.html#methodarrSetErrFnc">arrSetErrFnc</a><strong>(</strong>__FUNCTION__<strong>,</strong>__LINE__<strong>)</strong><a name="a797"></a><br />797                   <strong>)</strong>;<a name="a798"></a><br />798       <strong>}</strong><a name="a799"></a><br />799       <strong>}</strong><a name="a800"></a><br />800       <strong>}</strong><a name="a801"></a><br />801       <a name="a802"></a><br />802       <font color="#009999">/**</font><a name="a803"></a><br />803   <font color="#009999">    * Return a list of nodes resulting from an XPath Query</font><a name="a804"></a><br />804   <font color="#009999">    *</font><a name="a805"></a><br />805   <font color="#009999">    * This function runs the XPath query and returns an array of nodes matching</font><a name="a806"></a><br />806   <font color="#009999">    * the results. Unfortunately, xpath_eval() never divulges any error</font><a name="a807"></a><br />807   <font color="#009999">    * information. I assume that $objRes-&gt;nodeset holds a false value if the</font><a name="a808"></a><br />808   <font color="#009999">    * query errored.</font><a name="a809"></a><br />809   <font color="#009999">    *</font><a name="a810"></a><br />810   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"> </font><em>string </em><font color="#009999"></font><font color="#009999">The XPath query</font><a name="a811"></a><br />811   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@access</font></strong><font color="#009999"> public</font><a name="a812"></a><br />812   <font color="#009999">    */</font><a name="a813"></a><br />813       <font color="blue">function</font> <strong>&amp;</strong><a href="../XAO/DomDoc.html#methodarrNdXPath">arrNdXPath</a><strong>(</strong><strong><font color="#008000">$strExpr</font></strong><strong>)</strong> <strong>{</strong><a name="a814"></a><br />814       <a href="http://www.php.net/ob_start">ob_start</a><strong>(</strong><strong>)</strong>;<a name="a815"></a><br />815               <strong><font color="#008000">$objRes</font></strong> =<strong>&amp;</strong> <a href="http://www.php.net/xpath_eval">xpath_eval</a><strong>(</strong><a href="http://www.php.net/xpath_new_context">xpath_new_context</a><strong>(</strong><strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#var$objDoc">objDoc</a><strong>)</strong><strong>,</strong><strong><font color="#008000">$strExpr</font></strong><strong>)</strong>;<a name="a816"></a><br />816               <strong><font color="#008000">$strDebugData</font></strong> = <a href="http://www.php.net/ob_get_contents">ob_get_contents</a><strong>(</strong><strong>)</strong>;<a name="a817"></a><br />817           <a href="http://www.php.net/ob_end_clean">ob_end_clean</a><strong>(</strong><strong>)</strong>;<a name="a818"></a><br />818           <font color="blue">if</font><strong>(</strong><a href="http://www.php.net/strlen">strlen</a><strong>(</strong><strong><font color="#008000">$strDebugData</font></strong><strong>)</strong> || <a href="http://www.php.net/is_array">is_array</a><strong>(</strong><strong><font color="#008000">$objRes</font></strong><strong>-&gt;</strong>nodeset<strong>)</strong><strong>)</strong> <strong>{</strong><a name="a819"></a><br />819           <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong>throw<strong>(</strong><a name="a820"></a><br />820               <font color="#ff702b">&quot;XPath query &quot;</font>.<strong><font color="#008000">$strExpr</font></strong>.<font color="#ff702b">&quot; returned errors:\n&quot;</font>.<strong><font color="#008000">$strDebugData</font></strong><a name="a821"></a><br />821           <strong>)</strong>;<a name="a822"></a><br />822           <strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/XaoRoot.html#var$strDebugData">strDebugData</a> = <strong><font color="#008000">$strDebugData</font></strong>;<a name="a823"></a><br />823           <font color="blue">return</font> false;<a name="a824"></a><br />824           <strong>}</strong><a name="a825"></a><br />825           <font color="blue">return</font> <strong><font color="#008000">$objRes</font></strong><strong>-&gt;</strong>nodeset;<a name="a826"></a><br />826       <strong>}</strong><a name="a827"></a><br />827       <a name="a828"></a><br />828       <font color="#009999">/**</font><a name="a829"></a><br />829   <font color="#009999">    * Test if the supplied node is on object of type &quot;domelement&quot;</font><a name="a830"></a><br />830   <font color="#009999">    *</font><a name="a831"></a><br />831   <font color="#009999">    * This function is useful for testing variables that need to be accessed as</font><a name="a832"></a><br />832   <font color="#009999">    * domelement objects..</font><a name="a833"></a><br />833   <font color="#009999">    *</font><a name="a834"></a><br />834   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"> </font><em>string </em><font color="#009999"></font><font color="#009999">The name to test.</font><a name="a835"></a><br />835   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@access</font></strong><font color="#009999"> public</font><a name="a836"></a><br />836   <font color="#009999">    */</font><a name="a837"></a><br />837       <font color="blue">function</font> <a href="../XAO/DomDoc.html#methodblnTestElementNode">blnTestElementNode</a><strong>(</strong><strong><font color="#008000">$ndEl</font></strong><strong>)</strong> <strong>{</strong><a name="a838"></a><br />838       <font color="blue">if</font><strong>(</strong><strong>!</strong><a href="http://www.php.net/is_object">is_object</a><strong>(</strong><strong><font color="#008000">$ndEl</font></strong><strong>)</strong><strong>)</strong> <font color="blue">return</font> false;<a name="a839"></a><br />839           <strong>(</strong><a href="http://www.php.net/get_class">get_class</a><strong>(</strong><strong><font color="#008000">$ndEl</font></strong><strong>)</strong> == <font color="#ff702b">&quot;domelement&quot;</font><strong>)</strong> ? <strong><font color="#008000">$res</font></strong> = true : <strong><font color="#008000">$res</font></strong> = false;<a name="a840"></a><br />840           <font color="blue">return</font> <strong><font color="#008000">$res</font></strong>;<a name="a841"></a><br />841       <strong>}</strong><a name="a842"></a><br />842       <a name="a843"></a><br />843       <font color="#009999">/**</font><a name="a844"></a><br />844   <font color="#009999">    * Do a reliable test for a valid element name</font><a name="a845"></a><br />845   <font color="#009999">    *</font><a name="a846"></a><br />846   <font color="#009999">    * This function tries to create an element using the supplied name. If it</font><a name="a847"></a><br />847   <font color="#009999">    * fails, then the name is assumed to be invalid.</font><a name="a848"></a><br />848   <font color="#009999">    *</font><a name="a849"></a><br />849   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"> </font><em>string </em><font color="#009999"></font><font color="#009999">The name to test.</font><a name="a850"></a><br />850   <font color="#009999">    *</font><font color="#009999"> </font><strong><font color = "#0099FF">@access</font></strong><font color="#009999"> public</font><a name="a851"></a><br />851   <font color="#009999">    */</font><a name="a852"></a><br />852       <font color="blue">function</font> <a href="../XAO/DomDoc.html#methodblnTestXmlName">blnTestXmlName</a><strong>(</strong><strong><font color="#008000">$strName</font></strong><strong>)</strong> <strong>{</strong><a name="a853"></a><br />853       <strong><font color="#008000">$ndTest</font></strong> = <strong>@</strong><strong><font color="#008000">$this</font></strong><strong>-&gt;</strong><a href="../XAO/DomDoc.html#var$objDoc">objDoc</a><strong>-&gt;</strong>create_element<strong>(</strong><strong><font color="#008000">$strName</font></strong><strong>)</strong>;<a name="a854"></a><br />854       <strong>(</strong><a href="http://www.php.net/is_object">is_object</a><strong>(</strong><strong><font color="#008000">$ndTest</font></strong><strong>)</strong><strong>)</strong> ? <strong><font color="#008000">$res</font></strong> = true : <strong><font color="#008000">$res</font></strong> = false;<a name="a855"></a><br />855           <font color="blue">return</font> <strong><font color="#008000">$res</font></strong>;<a name="a856"></a><br />856       <strong>}</strong><a name="a857"></a><br />857   <strong>}</strong> <font color="#a0a0a4">// END CLASS</font><a name="a858"></a><br />858   <strong>?&gt;</strong></pre>
</div>
        <div class="credit">
		    <hr class="separator" />
		    Documentation generated on Fri,  3 Oct 2003 19:09:41 +1000 by <a href="http://www.phpdoc.org">phpDocumentor 1.2.2</a>
	      </div>
      </td></tr></table>
    </td>
  </tr>
</table>

</body>
</html>